<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì²´ì˜ í™•ì‚° ì‹¤í—˜ ì‹œë®¬ë ˆì´ì…˜ - ì¤‘í•™êµ 1í•™ë…„ ê³¼í•™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .achievement {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.95em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            padding: 30px;
        }

        .control-panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .control-section {
            margin-bottom: 25px;
        }

        .control-section h3 {
            color: #1976D2;
            margin-bottom: 15px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 0.95em;
        }

        .btn-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            flex: 1;
            min-width: 70px;
        }

        .btn:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
        }

        .btn.active {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }

        .slider-container {
            margin-bottom: 10px;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2196F3;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2196F3;
            cursor: pointer;
        }

        .slider-value {
            text-align: center;
            font-weight: 600;
            color: #2196F3;
            margin-top: 5px;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .primary-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.4);
        }

        .report-btn {
            background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);
            color: white;
        }

        .report-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
        }

        .experiment-area {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .simulation-container {
            background: #f0f4f8;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            position: relative;
            min-height: 400px;
        }

        #experimentCanvas {
            width: 100%;
            height: 350px;
            background: white;
            border-radius: 10px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        .timer-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: 700;
            color: #2196F3;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .status-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.95em;
        }

        .status-ready {
            background: #e3f2fd;
            color: #1976D2;
        }

        .status-running {
            background: #e8f5e9;
            color: #388E3C;
            animation: pulse 2s infinite;
        }

        .status-complete {
            background: #fff3e0;
            color: #f57c00;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .results-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .result-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .result-card h4 {
            color: #1976D2;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        #graphCanvas {
            width: 100%;
            height: 250px;
            background: white;
            border-radius: 8px;
        }

        .data-table {
            width: 100%;
            font-size: 0.9em;
        }

        .data-table td {
            padding: 8px;
            border-bottom: 1px solid #e0e0e0;
        }

        .data-table td:first-child {
            font-weight: 600;
            color: #555;
        }

        .data-table td:last-child {
            text-align: right;
            color: #2196F3;
            font-weight: 600;
        }

        .feedback-section {
            background: #e3f2fd;
            padding: 25px;
            border-radius: 12px;
            margin-top: 25px;
        }

        .feedback-section h3 {
            color: #1976D2;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .question-card {
            background: white;
            padding: 18px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #2196F3;
        }

        .question-card p {
            color: #333;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .hint-box {
            background: #fff3e0;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #ff9800;
        }

        .hint-box p {
            color: #f57c00;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .particle-legend {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .results-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª ê¸°ì²´ì˜ í™•ì‚° ì‹¤í—˜ ì‹œë®¬ë ˆì´ì…˜</h1>
            <p>ì•”ëª¨ë‹ˆì•„ ê¸°ì²´ì˜ í™•ì‚° í˜„ìƒì„ ê´€ì°°í•˜ê³  ì…ì ìš´ë™ìœ¼ë¡œ ì„¤ëª…í•´ë´…ì‹œë‹¤</p>
            <div class="achievement">
                <strong>ì„±ì·¨ê¸°ì¤€:</strong> ì¤‘1 ê³¼í•™ 4-01 "ê¸°ì²´ì˜ í™•ì‚° í˜„ìƒì„ ê´€ì°°í•˜ê³ , ì…ì ìš´ë™ìœ¼ë¡œ ì„¤ëª…í•œë‹¤."<br>
                <strong>ë‹¨ì›:</strong> â…£. ê¸°ì²´ì˜ ì„±ì§ˆ
            </div>
        </div>

        <div class="main-content">
            <!-- ì¡°ì‘ íŒ¨ë„ -->
            <div class="control-panel">
                <div class="control-section">
                    <h3>ğŸŒ¡ï¸ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h3>
                    
                    <div class="control-group">
                        <label>ì˜¨ë„ ì¡°ê±´</label>
                        <div class="btn-group">
                            <button class="btn" data-temp="10">ì €ì˜¨<br>10Â°C</button>
                            <button class="btn active" data-temp="25">ìƒì˜¨<br>25Â°C</button>
                            <button class="btn" data-temp="40">ê³ ì˜¨<br>40Â°C</button>
                        </div>
                    </div>

                    <div class="control-group">
                        <label>ì•”ëª¨ë‹ˆì•„ ë†ë„ (ë°©ìš¸ ìˆ˜)</label>
                        <div class="slider-container">
                            <input type="range" id="dropSlider" min="1" max="3" value="2" step="1">
                            <div class="slider-value"><span id="dropValue">2</span> ë°©ìš¸</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label>ë¹¨ëŒ€ ê¸¸ì´</label>
                        <div class="btn-group">
                            <button class="btn" data-length="short">ì§§ìŒ<br>20cm</button>
                            <button class="btn active" data-length="medium">ë³´í†µ<br>30cm</button>
                            <button class="btn" data-length="long">ê¹€<br>40cm</button>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>ğŸ® ì‹¤í—˜ ì œì–´</h3>
                    <div class="action-buttons">
                        <button class="primary-btn start-btn" id="startBtn">â–¶ï¸ ì‹¤í—˜ ì‹œì‘</button>
                        <button class="primary-btn reset-btn" id="resetBtn">ğŸ”„ ì´ˆê¸°í™”</button>
                        <button class="primary-btn report-btn" id="reportBtn">ğŸ“Š ë³´ê³ ì„œ ìƒì„±</button>
                    </div>
                </div>

                <div class="control-section">
                    <h3>â„¹ï¸ ì‹¤í—˜ ì•ˆë‚´</h3>
                    <div style="font-size: 0.9em; line-height: 1.6; color: #555;">
                        <p style="margin-bottom: 10px;">
                            <strong>ì‹¤í—˜ ë°©ë²•:</strong><br>
                            1. ì›í•˜ëŠ” ì˜¨ë„ì™€ ë†ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”<br>
                            2. ì‹¤í—˜ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”<br>
                            3. ì…ìì˜ ì›€ì§ì„ê³¼ ìƒ‰ ë³€í™”ë¥¼ ê´€ì°°í•˜ì„¸ìš”
                        </p>
                        <p style="background: #fff3e0; padding: 10px; border-radius: 5px; margin-top: 10px;">
                            <strong>ğŸ’¡ ê´€ì°° í¬ì¸íŠ¸:</strong><br>
                            â€¢ ì˜¨ë„ì— ë”°ë¥¸ ì…ì ì†ë„ ë³€í™”<br>
                            â€¢ ì§€ì‹œì•½ ì¢…ì´ì˜ ìƒ‰ ë³€í™” ì‹œì <br>
                            â€¢ í™•ì‚° ê±°ë¦¬ì™€ ì‹œê°„ì˜ ê´€ê³„
                        </p>
                    </div>
                </div>
            </div>

            <!-- ì‹¤í—˜ ì˜ì—­ -->
            <div class="experiment-area">
                <div class="simulation-container">
                    <div class="status-indicator status-ready" id="statusIndicator">ì‹¤í—˜ ì¤€ë¹„ ì¤‘</div>
                    <div class="timer-display" id="timerDisplay">0.0ì´ˆ</div>
                    <canvas id="experimentCanvas"></canvas>
                    <div class="particle-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #2196F3;"></div>
                            <span>ì•”ëª¨ë‹ˆì•„ ì…ì (NHâ‚ƒ)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #FF9800;"></div>
                            <span>ë§ŒëŠ¥ ì§€ì‹œì•½ ì¢…ì´</span>
                        </div>
                    </div>
                </div>

                <div class="results-section">
                    <div class="result-card">
                        <h4>ğŸ“ˆ ì‹œê°„-ê±°ë¦¬ ê·¸ë˜í”„</h4>
                        <canvas id="graphCanvas"></canvas>
                    </div>
                    <div class="result-card">
                        <h4>ğŸ“‹ ì‹¤í—˜ ê²°ê³¼ ë°ì´í„°</h4>
                        <table class="data-table">
                            <tr>
                                <td>ì˜¨ë„ ì¡°ê±´</td>
                                <td id="resultTemp">-</td>
                            </tr>
                            <tr>
                                <td>ì•”ëª¨ë‹ˆì•„ ë†ë„</td>
                                <td id="resultDrop">-</td>
                            </tr>
                            <tr>
                                <td>ë¹¨ëŒ€ ê¸¸ì´</td>
                                <td id="resultLength">-</td>
                            </tr>
                            <tr>
                                <td>ìƒ‰ ë³€í™” ì‹œì‘ ì‹œê°„</td>
                                <td id="resultTime">-</td>
                            </tr>
                            <tr>
                                <td>í‰ê·  í™•ì‚° ì†ë„</td>
                                <td id="resultSpeed">-</td>
                            </tr>
                            <tr>
                                <td>ë„ë‹¬ ê±°ë¦¬</td>
                                <td id="resultDistance">-</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="feedback-section" id="feedbackSection" style="display: none;">
                    <h3>ğŸ¤” íƒêµ¬ ì§ˆë¬¸</h3>
                    <div class="question-card">
                        <p><strong>Q1.</strong> ì•”ëª¨ë‹ˆì•„ ê¸°ì²´ëŠ” ì™œ ì§ì ‘ ë‹¿ì§€ ì•Šì•˜ëŠ”ë°ë„ ì§€ì‹œì•½ ì¢…ì´ì˜ ìƒ‰ì„ ë³€í•˜ê²Œ í–ˆì„ê¹Œìš”?</p>
                        <div class="hint-box">
                            <p><strong>íŒíŠ¸:</strong> ê¸°ì²´ëŠ” ì…ìë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë©°, ì´ ì…ìë“¤ì€ ëŠì„ì—†ì´ ì›€ì§ì…ë‹ˆë‹¤. ì•”ëª¨ë‹ˆì•„ ì…ìê°€ ê³µê¸° ì¤‘ì„ ì–´ë–»ê²Œ ì´ë™í–ˆëŠ”ì§€ ìƒê°í•´ë³´ì„¸ìš”.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <p><strong>Q2.</strong> ì–´ë–¤ ì¡°ê±´ì—ì„œ í™•ì‚°ì´ ë” ë¹¨ëë‚˜ìš”? ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p>
                        <div class="hint-box">
                            <p><strong>íŒíŠ¸:</strong> ì˜¨ë„ê°€ ë†’ì„ìˆ˜ë¡ ì…ìë“¤ì˜ ìš´ë™ ì—ë„ˆì§€ê°€ ì¦ê°€í•©ë‹ˆë‹¤. ì‹¤í—˜ ê²°ê³¼ì—ì„œ ì˜¨ë„ ë³€í™”ì— ë”°ë¥¸ ì‹œê°„ ì°¨ì´ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <p><strong>Q3.</strong> ì¼ìƒìƒí™œì—ì„œ ê¸°ì²´ì˜ í™•ì‚°ì„ ê´€ì°°í•  ìˆ˜ ìˆëŠ” ì˜ˆë¥¼ ë“¤ì–´ë³´ì„¸ìš”.</p>
                        <div class="hint-box">
                            <p><strong>íŒíŠ¸:</strong> ìŒì‹ ëƒ„ìƒˆê°€ í¼ì§€ëŠ” ê²ƒ, í–¥ìˆ˜ ëƒ„ìƒˆ, ê°€ìŠ¤ ëˆ„ì¶œ ê°ì§€ ë“±ì´ ëª¨ë‘ í™•ì‚°ì˜ ì˜ˆì…ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì‹¤í—˜ ì„¤ì • ë³€ìˆ˜
        let experimentConfig = {
            temperature: 25,
            drops: 2,
            length: 'medium',
            lengthCm: 30
        };

        // ì‹¤í—˜ ìƒíƒœ
        let experimentState = {
            isRunning: false,
            startTime: 0,
            currentTime: 0,
            particles: [],
            colorChangeTime: null,
            graphData: []
        };

        // ìº”ë²„ìŠ¤ ì„¤ì •
        const canvas = document.getElementById('experimentCanvas');
        const ctx = canvas.getContext('2d');
        const graphCanvas = document.getElementById('graphCanvas');
        const graphCtx = graphCanvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            graphCanvas.width = graphCanvas.offsetWidth;
            graphCanvas.height = graphCanvas.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // ê¸¸ì´ ë§µí•‘
        const lengthMap = {
            'short': 20,
            'medium': 30,
            'long': 40
        };

        // ì˜¨ë„ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.querySelectorAll('[data-temp]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-temp]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                experimentConfig.temperature = parseInt(this.dataset.temp);
            });
        });

        // ê¸¸ì´ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.querySelectorAll('[data-length]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-length]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                experimentConfig.length = this.dataset.length;
                experimentConfig.lengthCm = lengthMap[this.dataset.length];
            });
        });

        // ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
        document.getElementById('dropSlider').addEventListener('input', function() {
            experimentConfig.drops = parseInt(this.value);
            document.getElementById('dropValue').textContent = this.value;
        });

        // ì…ì í´ë˜ìŠ¤
        class Particle {
            constructor(x, y, speed) {
                this.x = x;
                this.y = y;
                this.speed = speed;
                this.angle = Math.random() * Math.PI * 2;
                this.vx = Math.cos(this.angle) * this.speed;
                this.vy = Math.sin(this.angle) * this.speed;
                this.radius = 3;
                this.color = '#2196F3';
            }

            update() {
                // ë¬´ì‘ìœ„ ë°©í–¥ ë³€í™” (ì¶©ëŒ ì‹œë®¬ë ˆì´ì…˜)
                if (Math.random() < 0.05) {
                    this.angle = Math.random() * Math.PI * 2;
                    this.vx = Math.cos(this.angle) * this.speed;
                    this.vy = Math.sin(this.angle) * this.speed;
                }

                this.x += this.vx;
                this.y += this.vy;

                // ë¹¨ëŒ€ ë‚´ë¶€ ê²½ê³„ ë°˜ì‚¬
                const tubeY = canvas.height / 2;
                const tubeHeight = 80;
                if (this.y < tubeY - tubeHeight/2 || this.y > tubeY + tubeHeight/2) {
                    this.vy = -this.vy;
                    this.y = Math.max(tubeY - tubeHeight/2, Math.min(tubeY + tubeHeight/2, this.y));
                }
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                
                // ì…ì ì£¼ë³€ íš¨ê³¼
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius + 2, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(33, 150, 243, 0.3)';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
        }

        // ì‹¤í—˜ ì‹œì‘
        document.getElementById('startBtn').addEventListener('click', startExperiment);

        function startExperiment() {
            if (experimentState.isRunning) return;

            experimentState.isRunning = true;
            experimentState.startTime = Date.now();
            experimentState.currentTime = 0;
            experimentState.particles = [];
            experimentState.colorChangeTime = null;
            experimentState.graphData = [];

            // ìƒíƒœ í‘œì‹œ ì—…ë°ì´íŠ¸
            document.getElementById('statusIndicator').className = 'status-indicator status-running';
            document.getElementById('statusIndicator').textContent = 'ì‹¤í—˜ ì§„í–‰ ì¤‘';

            // ì…ì ì†ë„ ê³„ì‚° (ì˜¨ë„ì— ë¹„ë¡€)
            const baseSpeed = 1;
            const tempFactor = experimentConfig.temperature / 25;
            const particleSpeed = baseSpeed * tempFactor;

            // ì…ì ìƒì„± (ë†ë„ì— ë¹„ë¡€)
            const particleCount = experimentConfig.drops * 30;
            for (let i = 0; i < particleCount; i++) {
                const particle = new Particle(
                    50 + Math.random() * 30,
                    canvas.height / 2 + (Math.random() - 0.5) * 60,
                    particleSpeed
                );
                experimentState.particles.push(particle);
            }

            // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
            animate();
        }

        // ì• ë‹ˆë©”ì´ì…˜
        function animate() {
            if (!experimentState.isRunning) return;

            experimentState.currentTime = (Date.now() - experimentState.startTime) / 1000;
            
            // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ë¹¨ëŒ€ ê·¸ë¦¬ê¸°
            const tubeY = canvas.height / 2;
            const tubeHeight = 80;
            const tubeLength = (experimentConfig.lengthCm / 40) * (canvas.width - 150);
            
            ctx.fillStyle = '#e0e0e0';
            ctx.fillRect(30, tubeY - tubeHeight/2, tubeLength, tubeHeight);
            
            ctx.strokeStyle = '#757575';
            ctx.lineWidth = 3;
            ctx.strokeRect(30, tubeY - tubeHeight/2, tubeLength, tubeHeight);

            // ì•”ëª¨ë‹ˆì•„ ìœ„ì¹˜ í‘œì‹œ
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.arc(50, tubeY, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 10px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('NHâ‚ƒ', 50, tubeY + 4);

            // ì§€ì‹œì•½ ì¢…ì´ ìœ„ì¹˜
            const indicatorX = 30 + tubeLength - 30;
            ctx.fillStyle = '#FF9800';
            ctx.fillRect(indicatorX - 5, tubeY - tubeHeight/2, 10, tubeHeight);

            // ì…ì ì—…ë°ì´íŠ¸ ë° ê·¸ë¦¬ê¸°
            let maxReachedX = 0;
            experimentState.particles.forEach(particle => {
                particle.update();
                particle.draw();
                
                if (particle.x > maxReachedX) {
                    maxReachedX = particle.x;
                }

                // ì§€ì‹œì•½ì— ë„ë‹¬ ì²´í¬
                if (particle.x >= indicatorX - 10 && !experimentState.colorChangeTime) {
                    experimentState.colorChangeTime = experimentState.currentTime;
                    document.getElementById('feedbackSection').style.display = 'block';
                }
            });

            // ìƒ‰ ë³€í™” íš¨ê³¼
            if (experimentState.colorChangeTime) {
                const timeSinceChange = experimentState.currentTime - experimentState.colorChangeTime;
                const colorIntensity = Math.min(timeSinceChange / 2, 1);
                
                ctx.fillStyle = `rgba(76, 175, 80, ${colorIntensity})`;
                ctx.fillRect(indicatorX - 5, tubeY - tubeHeight/2, 10, tubeHeight);
                
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ìƒ‰ë³€í™”!', indicatorX, tubeY - tubeHeight/2 - 10);
            }

            // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
            document.getElementById('timerDisplay').textContent = experimentState.currentTime.toFixed(1) + 'ì´ˆ';

            // ê·¸ë˜í”„ ë°ì´í„° ì¶”ê°€
            const reachedDistance = ((maxReachedX - 30) / tubeLength) * experimentConfig.lengthCm;
            experimentState.graphData.push({
                time: experimentState.currentTime,
                distance: Math.max(0, reachedDistance)
            });

            // ê·¸ë˜í”„ ì—…ë°ì´íŠ¸
            drawGraph();

            // ì‹¤í—˜ ì¢…ë£Œ ì¡°ê±´
            if (experimentState.colorChangeTime && experimentState.currentTime - experimentState.colorChangeTime > 3) {
                completeExperiment();
                return;
            }

            if (experimentState.currentTime > 60) {
                completeExperiment();
                return;
            }

            requestAnimationFrame(animate);
        }

        // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
        function drawGraph() {
            if (experimentState.graphData.length < 2) return;

            graphCtx.clearRect(0, 0, graphCanvas.width, graphCanvas.height);

            const padding = 40;
            const graphWidth = graphCanvas.width - padding * 2;
            const graphHeight = graphCanvas.height - padding * 2;

            // ì¶• ê·¸ë¦¬ê¸°
            graphCtx.strokeStyle = '#333';
            graphCtx.lineWidth = 2;
            graphCtx.beginPath();
            graphCtx.moveTo(padding, padding);
            graphCtx.lineTo(padding, graphCanvas.height - padding);
            graphCtx.lineTo(graphCanvas.width - padding, graphCanvas.height - padding);
            graphCtx.stroke();

            // ë ˆì´ë¸”
            graphCtx.fillStyle = '#333';
            graphCtx.font = '12px Arial';
            graphCtx.textAlign = 'center';
            graphCtx.fillText('ì‹œê°„ (ì´ˆ)', graphCanvas.width / 2, graphCanvas.height - 10);
            
            graphCtx.save();
            graphCtx.translate(15, graphCanvas.height / 2);
            graphCtx.rotate(-Math.PI / 2);
            graphCtx.fillText('ê±°ë¦¬ (cm)', 0, 0);
            graphCtx.restore();

            // ë°ì´í„° ìŠ¤ì¼€ì¼ë§
            const maxTime = Math.max(...experimentState.graphData.map(d => d.time));
            const maxDistance = experimentConfig.lengthCm;

            // ë°ì´í„° í¬ì¸íŠ¸ ê·¸ë¦¬ê¸°
            graphCtx.strokeStyle = '#2196F3';
            graphCtx.lineWidth = 3;
            graphCtx.beginPath();

            experimentState.graphData.forEach((point, index) => {
                const x = padding + (point.time / maxTime) * graphWidth;
                const y = graphCanvas.height - padding - (point.distance / maxDistance) * graphHeight;

                if (index === 0) {
                    graphCtx.moveTo(x, y);
                } else {
                    graphCtx.lineTo(x, y);
                }
            });

            graphCtx.stroke();

            // í¬ì¸íŠ¸ í‘œì‹œ
            experimentState.graphData.forEach((point, index) => {
                if (index % 10 === 0) {
                    const x = padding + (point.time / maxTime) * graphWidth;
                    const y = graphCanvas.height - padding - (point.distance / maxDistance) * graphHeight;
                    
                    graphCtx.fillStyle = '#2196F3';
                    graphCtx.beginPath();
                    graphCtx.arc(x, y, 4, 0, Math.PI * 2);
                    graphCtx.fill();
                }
            });
        }

        // ì‹¤í—˜ ì™„ë£Œ
        function completeExperiment() {
            experimentState.isRunning = false;
            
            document.getElementById('statusIndicator').className = 'status-indicator status-complete';
            document.getElementById('statusIndicator').textContent = 'ì‹¤í—˜ ì™„ë£Œ';

            // ê²°ê³¼ ì—…ë°ì´íŠ¸
            document.getElementById('resultTemp').textContent = experimentConfig.temperature + 'Â°C';
            document.getElementById('resultDrop').textContent = experimentConfig.drops + ' ë°©ìš¸';
            document.getElementById('resultLength').textContent = experimentConfig.lengthCm + ' cm';
            
            if (experimentState.colorChangeTime) {
                document.getElementById('resultTime').textContent = experimentState.colorChangeTime.toFixed(2) + ' ì´ˆ';
                const speed = (experimentConfig.lengthCm / experimentState.colorChangeTime).toFixed(2);
                document.getElementById('resultSpeed').textContent = speed + ' cm/s';
                document.getElementById('resultDistance').textContent = experimentConfig.lengthCm + ' cm';
            } else {
                document.getElementById('resultTime').textContent = 'ë¯¸ë„ë‹¬';
                document.getElementById('resultSpeed').textContent = '-';
                document.getElementById('resultDistance').textContent = '-';
            }
        }

        // ì´ˆê¸°í™”
        document.getElementById('resetBtn').addEventListener('click', function() {
            experimentState.isRunning = false;
            experimentState.particles = [];
            experimentState.colorChangeTime = null;
            experimentState.graphData = [];
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            graphCtx.clearRect(0, 0, graphCanvas.width, graphCanvas.height);
            
            document.getElementById('statusIndicator').className = 'status-indicator status-ready';
            document.getElementById('statusIndicator').textContent = 'ì‹¤í—˜ ì¤€ë¹„ ì¤‘';
            document.getElementById('timerDisplay').textContent = '0.0ì´ˆ';
            document.getElementById('feedbackSection').style.display = 'none';
            
            // ê²°ê³¼ ì´ˆê¸°í™”
            document.getElementById('resultTemp').textContent = '-';
            document.getElementById('resultDrop').textContent = '-';
            document.getElementById('resultLength').textContent = '-';
            document.getElementById('resultTime').textContent = '-';
            document.getElementById('resultSpeed').textContent = '-';
            document.getElementById('resultDistance').textContent = '-';
        });

        // ë³´ê³ ì„œ ìƒì„±
        document.getElementById('reportBtn').addEventListener('click', function() {
            if (!experimentState.colorChangeTime) {
                alert('ë¨¼ì € ì‹¤í—˜ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”!');
                return;
            }

            generateReport();
        });

        function generateReport() {
            const report = `
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    ê¸°ì²´ì˜ í™•ì‚° ì‹¤í—˜ ë³´ê³ ì„œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ ì‹¤í—˜ ì •ë³´
ë‹¨ì›: â…£. ê¸°ì²´ì˜ ì„±ì§ˆ
ì„±ì·¨ê¸°ì¤€: ì¤‘1 ê³¼í•™ 4-01
ì‹¤í—˜ ì£¼ì œ: ì•”ëª¨ë‹ˆì•„ ê¸°ì²´ì˜ í™•ì‚° ê´€ì°°
ì‹¤í—˜ì¼ì‹œ: ${new Date().toLocaleString('ko-KR')}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”¬ ì‹¤í—˜ ì¡°ê±´
â€¢ ì˜¨ë„: ${experimentConfig.temperature}Â°C
â€¢ ì•”ëª¨ë‹ˆì•„ ë†ë„: ${experimentConfig.drops} ë°©ìš¸
â€¢ ë¹¨ëŒ€ ê¸¸ì´: ${experimentConfig.lengthCm} cm

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š ì‹¤í—˜ ê²°ê³¼
â€¢ ìƒ‰ ë³€í™” ì‹œì‘ ì‹œê°„: ${experimentState.colorChangeTime.toFixed(2)} ì´ˆ
â€¢ í‰ê·  í™•ì‚° ì†ë„: ${(experimentConfig.lengthCm / experimentState.colorChangeTime).toFixed(2)} cm/s
â€¢ ë„ë‹¬ ê±°ë¦¬: ${experimentConfig.lengthCm} cm

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ ì‹¤í—˜ ë¶„ì„

1. í™•ì‚° í˜„ìƒ ê´€ì°°
   ì•”ëª¨ë‹ˆì•„ ê¸°ì²´ ì…ìë“¤ì´ ë¹¨ëŒ€ ë‚´ë¶€ë¥¼ í†µí•´ ì´ë™í•˜ì—¬
   ë§ŒëŠ¥ ì§€ì‹œì•½ ì¢…ì´ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ê¸°ì²´ ì…ìë“¤ì´
   ëŠì„ì—†ì´ ë¬´ì‘ìœ„ë¡œ ìš´ë™í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

2. ì˜¨ë„ì˜ ì˜í–¥
   ì˜¨ë„: ${experimentConfig.temperature}Â°C
   ${experimentConfig.temperature > 25 
       ? 'ë†’ì€ ì˜¨ë„ì—ì„œ ì…ìì˜ ìš´ë™ ì—ë„ˆì§€ê°€ ì¦ê°€í•˜ì—¬ í™•ì‚°ì´ ë¹ ë¥´ê²Œ ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤.'
       : experimentConfig.temperature < 25
       ? 'ë‚®ì€ ì˜¨ë„ì—ì„œ ì…ìì˜ ìš´ë™ ì—ë„ˆì§€ê°€ ê°ì†Œí•˜ì—¬ í™•ì‚°ì´ ëŠë¦¬ê²Œ ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤.'
       : 'ìƒì˜¨ì—ì„œ ì ì ˆí•œ ì†ë„ë¡œ í™•ì‚°ì´ ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤.'}

3. ì…ì ìš´ë™ ì´ë¡ 
   â€¢ ê¸°ì²´ëŠ” ì‘ì€ ì…ìë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.
   â€¢ ì…ìë“¤ì€ ëª¨ë“  ë°©í–¥ìœ¼ë¡œ ëŠì„ì—†ì´ ì›€ì§ì…ë‹ˆë‹¤.
   â€¢ ì…ìë“¤ì€ ì„œë¡œ ì¶©ëŒí•˜ë©° ë°©í–¥ì„ ë°”ê¿‰ë‹ˆë‹¤.
   â€¢ ì˜¨ë„ê°€ ë†’ì„ìˆ˜ë¡ ì…ìì˜ ì†ë„ê°€ ë¹ ë¦…ë‹ˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤” íƒêµ¬ ì§ˆë¬¸ ë‹µë³€

Q1. ì•”ëª¨ë‹ˆì•„ ê¸°ì²´ëŠ” ì™œ ì§ì ‘ ë‹¿ì§€ ì•Šì•˜ëŠ”ë°ë„ 
    ì§€ì‹œì•½ ì¢…ì´ì˜ ìƒ‰ì„ ë³€í•˜ê²Œ í–ˆì„ê¹Œìš”?

A1. ì•”ëª¨ë‹ˆì•„ ê¸°ì²´ë¥¼ êµ¬ì„±í•˜ëŠ” ì…ìë“¤ì´ ëŠì„ì—†ì´
    ë¬´ì‘ìœ„ë¡œ ìš´ë™í•˜ë©´ì„œ ê³µê°„ ì†ìœ¼ë¡œ í¼ì ¸ë‚˜ê°”ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
    ì´ëŸ¬í•œ í˜„ìƒì„ 'í™•ì‚°'ì´ë¼ê³  í•©ë‹ˆë‹¤.

Q2. ì–´ë–¤ ì¡°ê±´ì—ì„œ í™•ì‚°ì´ ë” ë¹¨ëë‚˜ìš”?

A2. ì˜¨ë„ê°€ ë†’ì„ìˆ˜ë¡ ì…ìì˜ ìš´ë™ ì—ë„ˆì§€ê°€ ì»¤ì ¸ì„œ
    í™•ì‚° ì†ë„ê°€ ë¹¨ë¼ì§‘ë‹ˆë‹¤. ë˜í•œ ë†ë„ê°€ ì§„í• ìˆ˜ë¡
    ë” ë§ì€ ì…ìê°€ ì´ë™í•˜ì—¬ ë¹ ë¥´ê²Œ ë„ë‹¬í•©ë‹ˆë‹¤.

Q3. ì¼ìƒìƒí™œì—ì„œì˜ í™•ì‚° ì˜ˆì‹œ

A3. 
â€¢ ìŒì‹ ëƒ„ìƒˆê°€ ë©€ë¦¬ê¹Œì§€ í¼ì§€ëŠ” í˜„ìƒ
â€¢ í–¥ìˆ˜ë‚˜ ë°©í–¥ì œì˜ í–¥ê¸°ê°€ í¼ì§€ëŠ” í˜„ìƒ
â€¢ ê°€ìŠ¤ ëˆ„ì¶œ ì‹œ ëƒ„ìƒˆë¡œ ê°ì§€ë˜ëŠ” í˜„ìƒ
â€¢ ì•„ì¹¨ì— ì´ìŠ¬ì´ ì¦ë°œí•˜ì—¬ ì‚¬ë¼ì§€ëŠ” í˜„ìƒ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… í•™ìŠµ ì„±ì·¨ë„ í‰ê°€

ì„±ì·¨ê¸°ì¤€ 4-01 ë‹¬ì„±ë„: â˜…â˜…â˜…â˜…â˜…

â€¢ í™•ì‚° í˜„ìƒ ê´€ì°°: ì™„ë£Œ
â€¢ ì…ì ìš´ë™ ì„¤ëª…: ì™„ë£Œ
â€¢ ì˜¨ë„ ì˜í–¥ ì´í•´: ì™„ë£Œ
â€¢ ì‹¤ìƒí™œ ì—°ê³„: ì™„ë£Œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ ì‹¤í—˜ì ë©”ëª¨
(í•™ìƒì´ ì§ì ‘ ì‘ì„±)

_______________________________________________
_______________________________________________
_______________________________________________

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
            `;

            // ë³´ê³ ì„œ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ê¸°ì²´í™•ì‚°ì‹¤í—˜_ë³´ê³ ì„œ_${new Date().getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert('ğŸ“Š ì‹¤í—˜ ë³´ê³ ì„œê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\n\níŒŒì¼ì„ ì—´ì–´ì„œ ì‹¤í—˜ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³ ,\nì‹¤í—˜ì ë©”ëª¨ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.');
        }

        // ì´ˆê¸° ê·¸ë¦¬ê¸°
        ctx.fillStyle = '#666';
        ctx.font = '20px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('ì‹¤í—˜ ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”', canvas.width / 2, canvas.height / 2);
    </script>
</body>
</html>
