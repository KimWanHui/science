<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¹—ë©´ ìœ„ ìˆ˜ë ˆ ì‹œë®¬ë ˆì´ì…˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #3498db;
      --secondary: #2ecc71;
      --danger: #e74c3c;
    }
    body {
      font-family: 'Noto Sans KR', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f7fa;
      font-size: 16px;
    }
    .container {
      max-width: 1000px;
      margin: auto;
    }
    .simulation-area {
      position: relative;
      width: 100%;
      height: 300px;
      background: #ecf0f1;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    .inclined-plane {
      position: absolute;
      width: 500px;
      height: 8px;
      background: #7f8c8d;
      top: 100px;
      left: 100px;
      transform-origin: left bottom;
    }
    .cart {
      position: absolute;
      width: 50px;
      height: 30px;
      background: var(--primary);
      color: white;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      transform-origin: center;
    }
    .variable-emoji {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 16px;
      font-weight: bold;
      color: #555;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .controls {
      background: #e9ecef;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    .mass-option {
      display: inline-block;
      padding: 6px 12px;
      border: 2px solid #ccc;
      border-radius: 5px;
      margin-right: 10px;
      cursor: pointer;
    }
    .mass-option.selected {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    button {
      padding: 8px 16px;
      margin-top: 10px;
      margin-right: 10px;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .btn-primary { background: var(--primary); color: white; }
    .btn-secondary { background: var(--secondary); color: white; }
    .feedback {
      margin-top: 10px;
      padding: 10px;
      border-radius: 5px;
      display: none;
    }
    .feedback.success {
      background: rgba(46, 204, 113, 0.15);
      border: 1px solid var(--secondary);
    }
    .feedback.error {
      background: rgba(231, 76, 60, 0.15);
      border: 1px solid var(--danger);
    }
    .tab-btn {
      display: inline-block;
      margin: 5px 5px 0 0;
      padding: 10px 15px;
      background: #95a5a6;
      color: white;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }
    .tab-btn.active {
      background: #2c3e50;
    }
    .tab-content {
      display: none;
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-top: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.05);
    }
    .tab-content.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #34495e;
      color: white;
    }
    .quiz-option {
      padding: 10px;
      margin: 5px 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
    }
    .quiz-option.selected {
      background: var(--primary);
      color: white;
    }
    .quiz-feedback {
      margin-top: 10px;
      font-weight: bold;
      display: none;
    }
    @media (max-width: 600px) {
      .mass-option, .tab-btn {
        display: block;
        width: 100%;
        margin-bottom: 5px;
      }
      .simulation-area { height: 250px; }
      .inclined-plane { width: 80%; left: 10%; }
      .cart { width: 40px; height: 24px; font-size: 13px; }
      canvas { width: 100% !important; height: auto !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ë¹—ë©´ ìœ„ ìˆ˜ë ˆ ë“±ê°€ì†ë„ ìš´ë™ ì‹œë®¬ë ˆì´ì…˜</h2>

    <div class="simulation-area">
      <div class="inclined-plane" id="inclined-plane"></div>
      <div class="cart" id="cart">0.5kg</div>
      <div class="variable-emoji" id="variable-emoji">[ë°”ëŒ]</div>
    </div>

    <div class="controls">
      <label>ê¸°ìš¸ê¸° ê°ë„: <span id="angle-value">20</span>Â°</label><br>
      <input type="range" id="angle-slider" min="5" max="45" value="20" step="1"><br><br>

      <label>ìˆ˜ë ˆ ì§ˆëŸ‰:</label><br>
      <span class="mass-option selected" data-mass="0.5">0.5kg</span>
      <span class="mass-option" data-mass="1.0">1.0kg</span>
      <span class="mass-option" data-mass="1.5">1.5kg</span><br><br>

      <button id="start-btn" class="btn-primary">ì‹¤í—˜ ì‹œì‘</button>
      <button id="reset-btn" class="btn-secondary">ì´ˆê¸°í™”</button>
    </div>
    <!-- ì˜ˆì¸¡ ì˜ì—­ -->
    <div class="section">
      <h3>ğŸ§  ì˜ˆì¸¡í•´ë³´ê¸°</h3>
      <p>í˜„ì¬ ì„¤ì •ì—ì„œ ì˜ˆìƒë˜ëŠ” ê°€ì†ë„ëŠ”? (ë‹¨ìœ„: m/sÂ²)</p>
      <input type="number" id="prediction-input" step="0.01" placeholder="ì˜ˆ: 2.5">
      <button id="check-prediction" class="btn-primary">í™•ì¸</button>
      <div id="prediction-feedback" class="feedback"></div>
    </div>

    <!-- ì´ë¡  ê³„ì‚° -->
    <div class="section">
      <h3>ğŸ“ ì´ë¡ ì  ê³„ì‚°</h3>
      <p>ê³µì‹: <code>a = gÂ·sin(Î¸)</code>, <code>F = mÂ·a</code></p>
      <p>ì´ë¡  ê°€ì†ë„: <span id="theory-acceleration">-</span> m/sÂ²</p>
      <p>ì´ë¡  ì•Œì§œí˜: <span id="theory-force">-</span> N</p>
      <p>ì¸¡ì • ê°€ì†ë„: <span id="measured-acceleration">-</span> m/sÂ²</p>
      <p>ì¸¡ì • ì•Œì§œí˜: <span id="measured-force">-</span> N</p>
    </div>

    <!-- íƒ­ ë²„íŠ¼ -->
    <div class="section">
      <button class="tab-btn" data-tab="position">ğŸ“Š ìœ„ì¹˜ ê·¸ë˜í”„</button>
      <button class="tab-btn" data-tab="velocity">ğŸ“ˆ ì†ë„ ê·¸ë˜í”„</button>
      <button class="tab-btn" data-tab="acceleration">âš¡ ê°€ì†ë„ ê·¸ë˜í”„</button>
      <button class="tab-btn" data-tab="data">ğŸ“‹ ë°ì´í„° í…Œì´ë¸”</button>
      <button class="tab-btn" data-tab="quiz">ğŸ§ª ê°œë… ë¬¸ì œ</button>
    </div>

    <!-- ê·¸ë˜í”„ íƒ­ ì½˜í…ì¸  -->
    <div id="position" class="tab-content">
      <canvas id="position-chart" width="600" height="300"></canvas>
      <div class="feedback success" style="margin-top: 10px;">
        <strong>ìœ„ì¹˜ ê·¸ë˜í”„:</strong> ê³¡ì„  í˜•íƒœëŠ” ë“±ê°€ì†ë„ ìš´ë™ì˜ ìœ„ì¹˜ ë°©ì •ì‹ <code>s = (1/2)Â·aÂ·tÂ²</code>ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
      </div>
    </div>

    <div id="velocity" class="tab-content">
      <canvas id="velocity-chart" width="600" height="300"></canvas>
      <div class="feedback success" style="margin-top: 10px;">
        <strong>ì†ë„ ê·¸ë˜í”„:</strong> ì§ì„  ê¸°ìš¸ê¸°ëŠ” ê°€ì†ë„ë¥¼ ì˜ë¯¸í•˜ë©° ë“±ê°€ì†ë„ ìš´ë™ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
      </div>
    </div>

    <div id="acceleration" class="tab-content">
      <canvas id="acceleration-chart" width="600" height="300"></canvas>
      <div class="feedback success" style="margin-top: 10px;">
        <strong>ê°€ì†ë„ ê·¸ë˜í”„:</strong> ì¼ì •í•œ ìˆ˜í‰ì„ ì€ ì¼ì •í•œ ì•Œì§œí˜ <code>F = mÂ·a</code>ë¥¼ ëœ»í•©ë‹ˆë‹¤.
      </div>
    </div>

    <!-- ë°ì´í„° í…Œì´ë¸” -->
    <div id="data" class="tab-content">
      <h4>ğŸ“‹ ì‹¤í—˜ ë°ì´í„° (0~2.0ì´ˆ, 0.2ì´ˆ ê°„ê²©)</h4>
      <table>
        <thead>
          <tr>
            <th>ì‹œê°„ (s)</th>
            <th>ìœ„ì¹˜ (cm)</th>
            <th>êµ¬ê°„ ê±°ë¦¬ (cm)</th>
            <th>êµ¬ê°„ ì†ë ¥ (cm/s)</th>
          </tr>
        </thead>
        <tbody id="data-table-body"></tbody>
      </table>
    </div>

    <!-- ë¬¸ì œ -->
    <div id="quiz" class="tab-content">
      <h4>ë¬¸ì œ 1. ë“±ê°€ì†ë„ ìš´ë™ì˜ íŠ¹ì§•ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ê²ƒì€?</h4>
      <div class="quiz-option" data-answer="b">ì‹œê°„-ì†ë„ ê·¸ë˜í”„ê°€ ì§ì„ ì´ë‹¤.</div>
      <div class="quiz-option" data-answer="a">ì‹œê°„-ìœ„ì¹˜ ê·¸ë˜í”„ê°€ ì§ì„ ì´ë‹¤.</div>
      <div class="quiz-option" data-answer="c">ê°€ì†ë„-ì‹œê°„ ê·¸ë˜í”„ê°€ ê³¡ì„ ì´ë‹¤.</div>
      <div class="quiz-feedback"></div>

      <h4 style="margin-top: 20px;">ë¬¸ì œ 2. ê°€ì†ë„ëŠ” ì–´ë–¤ ê°’ì— ë¹„ë¡€í•˜ëŠ”ê°€?</h4>
      <div class="quiz-option" data-answer="a">ê¸°ìš¸ê¸° ê°ë„ì˜ ì‚¬ì¸ê°’</div>
      <div class="quiz-option" data-answer="b">ë¬¼ì²´ì˜ ì§ˆëŸ‰</div>
      <div class="quiz-feedback"></div>
    </div>
<script>
const g = 9.8;
let angle = 20;
let mass = 0.5;
let isRunning = false;
let startTime, animationId;

let timeData = [], positionData = [], velocityData = [], accelerationData = [];
let chartDrawn = { position: false, velocity: false, acceleration: false };

// ì´ˆê¸° ì„¤ì •
window.onload = () => {
  updateAngle();
  updateTheory();
  resetCart();
};

// ê°ë„ ìŠ¬ë¼ì´ë”
document.getElementById("angle-slider").oninput = function () {
  angle = parseInt(this.value);
  document.getElementById("angle-value").textContent = angle;
  updateAngle();
  updateTheory();
  resetCart();
};

// ì§ˆëŸ‰ ì„ íƒ
document.querySelectorAll(".mass-option").forEach(opt => {
  opt.onclick = () => {
    document.querySelectorAll(".mass-option").forEach(o => o.classList.remove("selected"));
    opt.classList.add("selected");
    mass = parseFloat(opt.dataset.mass);
    document.getElementById("cart").textContent = mass + "kg";
    updateTheory();
  };
});

// ì‹¤í—˜ ì‹œì‘
document.getElementById("start-btn").onclick = () => {
  if (isRunning) return;
  isRunning = true;
  startTime = Date.now();
  timeData = [];
  positionData = [];
  velocityData = [];
  accelerationData = [];
  animateCart();
  collectData();
};

// ì´ˆê¸°í™”
document.getElementById("reset-btn").onclick = () => {
  isRunning = false;
  cancelAnimationFrame(animationId);
  resetCart();
  document.getElementById("measured-acceleration").textContent = "-";
  document.getElementById("measured-force").textContent = "-";
  document.getElementById("prediction-feedback").style.display = "none";
  document.getElementById("data-table-body").innerHTML = "";
  document.getElementById("variable-emoji").style.opacity = 0;
};

// ë¹—ë©´ íšŒì „
function updateAngle() {
  document.getElementById("inclined-plane").style.transform = `rotate(${angle}deg)`;
}

// ì¹´íŠ¸ ìœ„ì¹˜ ì´ˆê¸°í™”
function resetCart() {
  const cart = document.getElementById("cart");
  cart.style.left = "100px";
  cart.style.top = (100 - cart.offsetHeight) + "px";
  cart.style.transform = `rotate(${angle}deg)`;
}

// ì´ë¡ ê°’ ì—…ë°ì´íŠ¸
function updateTheory() {
  const a = g * Math.sin(angle * Math.PI / 180);
  const f = mass * a;
  document.getElementById("theory-acceleration").textContent = a.toFixed(2);
  document.getElementById("theory-force").textContent = f.toFixed(2);
}

// ì‹¤í—˜ ì• ë‹ˆë©”ì´ì…˜
function animateCart() {
  if (!isRunning) return;
  const t = (Date.now() - startTime) / 1000;
  const a = g * Math.sin(angle * Math.PI / 180);
  const s = 0.5 * a * t * t;
  const d = Math.min(s * 20, 400);
  const rad = angle * Math.PI / 180;
  const x = 100 + d * Math.cos(rad);
  const y = 100 + d * Math.sin(rad);
  const cart = document.getElementById("cart");
  cart.style.left = `${x}px`;
  cart.style.top = `${y - cart.offsetHeight}px`;
  if (d >= 400 || t >= 2.0) {
    stopExperiment();
    return;
  }
  animationId = requestAnimationFrame(animateCart);
}

// ì‹¤í—˜ ì¢…ë£Œ ì‹œ ì¸¡ì •ê°’ ë° ì´ëª¨ì§€ í‘œì‹œ
function stopExperiment() {
  isRunning = false;
  cancelAnimationFrame(animationId);
  const aTheory = g * Math.sin(angle * Math.PI / 180);
  const error = ((Math.random() * 3) / 100) * (Math.random() < 0.5 ? -1 : 1);
  const aMeasured = aTheory * (1 + error);
  const fMeasured = mass * aMeasured;
  document.getElementById("measured-acceleration").textContent = aMeasured.toFixed(2);
  document.getElementById("measured-force").textContent = fMeasured.toFixed(2);
  const emoji = document.getElementById("variable-emoji");
  if (Math.abs(error * 100) < 1) emoji.textContent = "ì •ìƒ";
  else if (Math.abs(error * 100) < 2) emoji.textContent = "[ë°”ëŒ]";
  else emoji.textContent = "[ë°”ëŒ][ë§ˆì°°]";
  emoji.style.opacity = 1;
}

// ë°ì´í„° ìˆ˜ì§‘
function collectData() {
  if (!isRunning) return;
  const t = (Date.now() - startTime) / 1000;
  const a = g * Math.sin(angle * Math.PI / 180);
  const s = 0.5 * a * t * t;
  const v = a * t;
  timeData.push(t.toFixed(2));
  positionData.push(s);
  velocityData.push(v);
  accelerationData.push(a);
  if (t <= 2.0) updateDataTable();
  setTimeout(collectData, 100);
}

// ë°ì´í„° í…Œì´ë¸” í‘œì‹œ (0~2.0ì´ˆ, 0.2ì´ˆ ê°„ê²©ë§Œ)
function updateDataTable() {
  const tbody = document.getElementById("data-table-body");
  tbody.innerHTML = "";
  for (let i = 0; i < timeData.length; i++) {
    const t = parseFloat(timeData[i]);
    if (Math.abs((t * 10) % 2) > 0.01 || t > 2.0) continue;
    const x = positionData[i] * 100;
    const dx = i === 0 ? "-" : ((positionData[i] - positionData[i - 1]) * 100).toFixed(2);
    const v = i === 0 ? "-" : (parseFloat(dx) / 0.1).toFixed(2);
    tbody.innerHTML += `<tr>
      <td>${t.toFixed(1)}</td>
      <td>${x.toFixed(2)}</td>
      <td>${dx}</td>
      <td>${v}</td>
    </tr>`;
  }
}

// ì˜ˆì¸¡ í”¼ë“œë°±
document.getElementById("check-prediction").onclick = () => {
  const val = parseFloat(document.getElementById("prediction-input").value);
  const theory = g * Math.sin(angle * Math.PI / 180);
  const error = Math.abs(val - theory) / theory * 100;
  const fb = document.getElementById("prediction-feedback");
  fb.style.display = "block";
  if (error <= 3) {
    fb.className = "feedback success";
    fb.innerHTML = `ì •ë‹µì…ë‹ˆë‹¤! ì˜¤ì°¨ìœ¨ ${error.toFixed(1)}%`;
  } else {
    fb.className = "feedback error";
    fb.innerHTML = `ì˜¤ì°¨ìœ¨ ${error.toFixed(1)}%<br>ê³µì‹: a = gÂ·sin(Î¸)`;
  }
};

// íƒ­ ì „í™˜ + ê·¸ë˜í”„ í´ë¦­ ì‹œ ì´ˆê¸°í™”
document.querySelectorAll(".tab-btn").forEach(btn => {
  btn.onclick = () => {
    document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    const tab = btn.dataset.tab;
    btn.classList.add("active");
    document.getElementById(tab).classList.add("active");
    if (!chartDrawn[tab] && ["position", "velocity", "acceleration"].includes(tab)) {
      setTimeout(() => drawChart(tab), 100);
    }
  };
});

// ê·¸ë˜í”„ ìƒì„±
function drawChart(tab) {
  const ctx = document.getElementById(`${tab}-chart`).getContext("2d");
  const data = tab === "position" ? positionData : tab === "velocity" ? velocityData : accelerationData;
  const label = tab === "position" ? "ìœ„ì¹˜(m)" : tab === "velocity" ? "ì†ë„(m/s)" : "ê°€ì†ë„(m/sÂ²)";
  const color = tab === "position" ? "#2980b9" : tab === "velocity" ? "#2ecc71" : "#e67e22";
  new Chart(ctx, {
    type: "line",
    data: {
      labels: timeData.map(t => parseFloat(t).toFixed(1)),
      datasets: [{
        label: label,
        data: data.map(v => v.toFixed(2)),
        borderColor: color,
        borderWidth: 2,
        fill: false
      }]
    },
    options: {
      responsive: false,
      scales: {
        x: { title: { display: true, text: "ì‹œê°„ (s)" } },
        y: { title: { display: true, text: label } }
      }
    }
  });
  chartDrawn[tab] = true;
}

// ë¬¸ì œ ì •ë‹µ í”¼ë“œë°± (1íšŒë§Œ)
document.querySelectorAll(".quiz-option").forEach(opt => {
  opt.onclick = () => {
    const parent = opt.closest(".tab-content");
    parent.querySelectorAll(".quiz-option").forEach(o => o.classList.remove("selected"));
    opt.classList.add("selected");
    const feedback = opt.parentElement.querySelector(".quiz-feedback");
    if (feedback.dataset.shown) return;
    const q1 = parent.innerHTML.includes("ë¬¸ì œ 1") && opt.dataset.answer === "b";
    const q2 = parent.innerHTML.includes("ë¬¸ì œ 2") && opt.dataset.answer === "a";
    feedback.textContent = (q1 || q2) ? "ì •ë‹µì…ë‹ˆë‹¤!" : "í‹€ë ¸ìŠµë‹ˆë‹¤.";
    feedback.dataset.shown = "true";
    feedback.style.display = "block";
  };
});
</script>
</body>
</html>
