<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¹—ë©´ ìœ„ ìˆ˜ë ˆ ì‹œë®¬ë ˆì´ì…˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    :root {
      --primary: #3498db;
      --secondary: #2ecc71;
      --danger: #e74c3c;
    }
    body {
      font-family: 'Noto Sans KR', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f7fa;
      font-size: 16px;
    }
    .container {
      max-width: 1000px;
      margin: auto;
    }
    .simulation-area {
      position: relative;
      width: 100%;
      height: 400px;
      background: #ecf0f1;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    .inclined-plane {
      position: absolute;
      width: 90%;
      height: 8px;
      background: #7f8c8d;
      top: 50px;
      left: 5%;
      transform-origin: left bottom;
    }
    .cart {
      position: absolute;
      width: 60px;
      height: 30px;
      background: var(--primary);
      color: white;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 5px 5px 0 0;
      transform-origin: center;
    }
    .wheel {
      position: absolute;
      width: 16px;
      height: 16px;
      background: #333;
      border-radius: 50%;
      border: 2px solid #555;
    }
    .variable-emoji {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 16px;
      font-weight: bold;
      color: #555;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .controls {
      background: #e9ecef;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    .mass-option {
      display: inline-block;
      padding: 6px 12px;
      border: 2px solid #ccc;
      border-radius: 5px;
      margin-right: 10px;
      cursor: pointer;
    }
    .mass-option.selected {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    button {
      padding: 8px 16px;
      margin-top: 10px;
      margin-right: 10px;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .btn-primary { background: var(--primary); color: white; }
    .btn-secondary { background: var(--secondary); color: white; }
    .feedback {
      margin-top: 10px;
      padding: 10px;
      border-radius: 5px;
      display: none;
    }
    .feedback.success {
      background: rgba(46, 204, 113, 0.15);
      border: 1px solid var(--secondary);
    }
    .feedback.error {
      background: rgba(231, 76, 60, 0.15);
      border: 1px solid var(--danger);
    }
    .tab-btn {
      display: inline-block;
      margin: 5px 5px 0 0;
      padding: 10px 15px;
      background: #95a5a6;
      color: white;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }
    .tab-btn.active {
      background: #2c3e50;
    }
    .tab-content {
      display: none;
      background: white;
      padding: 10px;
      border-radius: 10px;
      margin-top: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.05);
      max-width: 650px;
      margin-left: auto;
      margin-right: auto;
      height: auto;
    }
    
    canvas {
      max-height: 220px !important;
      width: 100% !important;
    }
    .tab-content.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #34495e;
      color: white;
    }
    .quiz-question {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 15px;
      background-color: #f9f9f9;
    }
    .quiz-option {
      padding: 10px;
      margin: 5px 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
    }
    .quiz-option.selected {
      background: var(--primary);
      color: white;
    }
    .quiz-feedback {
      margin-top: 10px;
      font-weight: bold;
      display: none;
    }
    .quiz-feedback.correct {
      background-color: rgba(46, 204, 113, 0.2);
      border: 1px solid #2ecc71;
      color: #27ae60;
    }
    .quiz-feedback.incorrect {
      background-color: rgba(231, 76, 60, 0.2);
      border: 1px solid #e74c3c;
      color: #c0392b;
    }
    .theory-section {
      display: none;
      margin-top: 10px;
      padding: 10px;
      background: #f5f9ff;
      border: 1px solid #bbd6ff;
      border-radius: 5px;
      font-size: 14px;
    }
    @media (max-width: 600px) {
      .mass-option, .tab-btn {
        display: block;
        width: 100%;
        margin-bottom: 5px;
      }
      .simulation-area { height: 300px; }
      .inclined-plane { width: 90%; left: 5%; }
      .cart { width: 40px; height: 24px; font-size: 13px; }
      canvas {
        height: 220px !important;
        width: 100% !important;
        max-width: 500px;
        margin: 0 auto;
        display: block;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ë¹—ë©´ ìœ„ ìˆ˜ë ˆ ë“±ê°€ì†ë„ ìš´ë™ ì‹œë®¬ë ˆì´ì…˜</h2>

    <div class="simulation-area">
      <div class="inclined-plane" id="inclined-plane"></div>
      <div class="cart" id="cart">0.5kg</div>
      <div class="variable-emoji" id="variable-emoji">[ë°”ëŒ]</div>
    </div>

    <div class="controls">
      <label>ê¸°ìš¸ê¸° ê°ë„: <span id="angle-value">20</span>Â°</label><br>
      <input type="range" id="angle-slider" min="15" max="30" value="20" step="1"><br><br>

      <label>ìˆ˜ë ˆ ì§ˆëŸ‰:</label><br>
      <span class="mass-option selected" data-mass="0.5">0.5kg</span>
      <span class="mass-option" data-mass="1.0">1.0kg</span>
      <span class="mass-option" data-mass="1.5">1.5kg</span><br><br>

      <button id="start-btn" class="btn-primary">ì‹¤í—˜ ì‹œì‘</button>
      <button id="reset-btn" class="btn-secondary">ì´ˆê¸°í™”</button>
    </div>
    
    <!-- ì¸¡ì • ë° ì˜¤ì°¨ ë¶„ì„ ì˜ì—­ -->
    <div class="section">
      <h3>ğŸ§  ì¸¡ì • ë° ì˜¤ì°¨ ë¶„ì„</h3>
      
      <div style="margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
        <p><strong>1. í˜„ì¬ ì¸¡ì •ëœ ê°€ì†ë„ëŠ”?</strong> (ë‹¨ìœ„: m/sÂ²)</p>
        <input type="number" id="measured-input" step="0.01" placeholder="ì˜ˆ: 2.5">
        <button id="check-measured" class="btn-primary">í™•ì¸</button>
        <button id="explain-measured" class="btn-secondary" style="display: none;">í•´ì„¤</button>
        <div id="measured-feedback" class="feedback"></div>
        <div id="measured-explanation" class="theory-section" style="display: none;">
          <h4>ğŸ“ ì¸¡ì • ê°€ì†ë„ ì„¤ëª…</h4>
          <p>ì¸¡ì • ê°€ì†ë„ëŠ” ì‹¤í—˜ì—ì„œ ê´€ì°°ëœ ê°’ìœ¼ë¡œ, ì•½ê°„ì˜ ì¸¡ì • ì˜¤ì°¨ê°€ í¬í•¨ë©ë‹ˆë‹¤.</p>
          <p>ì¸¡ì • ê°€ì†ë„: <span id="measured-acc-value">-</span> m/sÂ²</p>
          <p>ì´ ê°’ì€ ì‹¤í—˜ í™˜ê²½ì— ë”°ë¼ ê³µê¸°ì €í•­, ë§ˆì°° ë“±ì˜ ì˜í–¥ìœ¼ë¡œ ì´ë¡ ê°’ê³¼ ì°¨ì´ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p>
        </div>
      </div>
      
      <div style="margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
        <p><strong>2. ì´ë¡ ì  ê°€ì†ë„ ê°’ì€?</strong> (ë‹¨ìœ„: m/sÂ²)</p>
        <input type="number" id="theory-input" step="0.01" placeholder="ì˜ˆ: 2.5">
        <button id="check-theory" class="btn-primary">í™•ì¸</button>
        <button id="explain-theory" class="btn-secondary" style="display: none;">í•´ì„¤</button>
        <div id="theory-feedback" class="feedback"></div>
        <div id="theory-explanation" class="theory-section" style="display: none;">
          <h4>ğŸ“ ì´ë¡  ê°€ì†ë„ ì„¤ëª…</h4>
          <p>ê³µì‹: <code>a = gÂ·sin(Î¸)</code></p>
          <p>ì¤‘ë ¥ê°€ì†ë„(g): 9.8 m/sÂ²</p>
          <p>ê°ë„(Î¸): <span id="angle-display">-</span>Â°</p>
          <p>ì´ë¡  ê°€ì†ë„: <span id="theory-acc-value">-</span> m/sÂ²</p>
          <p>ì´ ê³µì‹ì€ ë¹—ë©´ì—ì„œ ì¤‘ë ¥ì˜ í‰í–‰ ì„±ë¶„ë§Œ ë¬¼ì²´ì— ì‘ìš©í•˜ê¸° ë•Œë¬¸ì— ë„ì¶œë©ë‹ˆë‹¤.</p>
        </div>
      </div>
      
      <div style="margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
        <p><strong>3. ì¸¡ì •ê°’ê³¼ ì´ë¡ ê°’ì˜ ìƒëŒ€ì˜¤ì°¨ëŠ”?</strong> (%)</p>
        <input type="number" id="error-input" step="0.1" placeholder="ì˜ˆ: 0.5">
        <button id="check-error" class="btn-primary">í™•ì¸</button>
        <button id="explain-error" class="btn-secondary" style="display: none;">í•´ì„¤</button>
        <div id="error-feedback" class="feedback"></div>
        <div id="error-explanation" class="theory-section" style="display: none;">
          <h4>ğŸ“ ìƒëŒ€ì˜¤ì°¨ ì„¤ëª…</h4>
          <p>ê³µì‹: <code>ìƒëŒ€ì˜¤ì°¨(%) = |ì¸¡ì •ê°’-ì´ë¡ ê°’|/ì´ë¡ ê°’Ã—100</code></p>
          <p>ì¸¡ì • ê°€ì†ë„: <span id="error-measured-value">-</span> m/sÂ²</p>
          <p>ì´ë¡  ê°€ì†ë„: <span id="error-theory-value">-</span> m/sÂ²</p>
          <p>ìƒëŒ€ì˜¤ì°¨: <span id="error-value">-</span> %</p>
          <p>ìƒëŒ€ì˜¤ì°¨ëŠ” ì‹¤í—˜ì˜ ì •í™•ë„ë¥¼ ë‚˜íƒ€ë‚´ë©°, ì¸¡ì •ê°’ì´ ì´ë¡ ê°’ì—ì„œ ì–¼ë§ˆë‚˜ ë²—ì–´ë‚¬ëŠ”ì§€ ë¹„ìœ¨ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>

    <!-- íƒ­ ë²„íŠ¼ -->
    <div class="section">
      <button class="tab-btn" data-tab="position">ğŸ“Š ìœ„ì¹˜ ê·¸ë˜í”„</button>
      <button class="tab-btn" data-tab="velocity">ğŸ“ˆ ì†ë„ ê·¸ë˜í”„</button>
      <button class="tab-btn" data-tab="acceleration">âš¡ ê°€ì†ë„ ê·¸ë˜í”„</button>
      <button class="tab-btn" data-tab="data">ğŸ“‹ ë°ì´í„° í…Œì´ë¸”</button>
      <button class="tab-btn" data-tab="quiz">ğŸ§ª ê°œë… ë¬¸ì œ</button>
    </div>

    <!-- ê·¸ë˜í”„ íƒ­ ì½˜í…ì¸  -->
    <div id="position" class="tab-content">
      <canvas id="position-chart" style="height: 220px !important; max-height: 220px !important;"></canvas>
      <div class="feedback success" style="margin-top: 8px; display: block; font-size: 13px;">
        <strong>ìœ„ì¹˜ ê·¸ë˜í”„:</strong> ê³¡ì„  í˜•íƒœëŠ” ë“±ê°€ì†ë„ ìš´ë™ì˜ ìœ„ì¹˜ ë°©ì •ì‹ <code>s = (1/2)Â·aÂ·tÂ²</code>ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
      </div>
    </div>

    <div id="velocity" class="tab-content">
      <canvas id="velocity-chart" style="height: 220px !important; max-height: 220px !important;"></canvas>
      <div class="feedback success" style="margin-top: 8px; display: block; font-size: 13px;">
        <strong>ì†ë„ ê·¸ë˜í”„:</strong> ì§ì„  ê¸°ìš¸ê¸°ëŠ” ê°€ì†ë„ë¥¼ ì˜ë¯¸í•˜ë©° ë“±ê°€ì†ë„ ìš´ë™ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
      </div>
    </div>

    <div id="acceleration" class="tab-content">
      <canvas id="acceleration-chart" style="height: 220px !important; max-height: 220px !important;"></canvas>
      <div class="feedback success" style="margin-top: 8px; display: block; font-size: 13px;">
        <strong>ê°€ì†ë„ ê·¸ë˜í”„:</strong> ì¼ì •í•œ ìˆ˜í‰ì„ ì€ ì¼ì •í•œ ì•Œì§œí˜ <code>F = mÂ·a</code>ë¥¼ ëœ»í•©ë‹ˆë‹¤.
      </div>
    </div>

    <!-- ë°ì´í„° í…Œì´ë¸” -->
    <div id="data" class="tab-content">
      <h4>ğŸ“‹ ì‹¤í—˜ ë°ì´í„° (0~2.0ì´ˆ, 0.2ì´ˆ ê°„ê²©ìœ¼ë¡œ í‘œì‹œ)</h4>
      <table>
        <thead>
          <tr>
            <th>ì‹œê°„ (s)</th>
            <th>ìœ„ì¹˜ (cm)</th>
            <th>êµ¬ê°„ ê±°ë¦¬ (cm)</th>
            <th>êµ¬ê°„ ì†ë ¥ (cm/s)</th>
          </tr>
        </thead>
        <tbody id="data-table-body"></tbody>
      </table>
    </div>

    <!-- ë¬¸ì œ -->
    <div id="quiz" class="tab-content">
      <div class="quiz-question">
        <h4>ë¬¸ì œ 1. ë“±ê°€ì†ë„ ìš´ë™ì˜ íŠ¹ì§•ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ê²ƒì€?</h4>
        <div class="quiz-option" data-answer="b" data-question="1">ì‹œê°„-ì†ë„ ê·¸ë˜í”„ê°€ ì§ì„ ì´ë‹¤.</div>
        <div class="quiz-option" data-answer="a" data-question="1">ì‹œê°„-ìœ„ì¹˜ ê·¸ë˜í”„ê°€ ì§ì„ ì´ë‹¤.</div>
        <div class="quiz-option" data-answer="c" data-question="1">ê°€ì†ë„-ì‹œê°„ ê·¸ë˜í”„ê°€ ê³¡ì„ ì´ë‹¤.</div>
        <div class="quiz-feedback" id="feedback-q1"></div>
      </div>

      <div class="quiz-question" style="margin-top: 20px;">
        <h4>ë¬¸ì œ 2. ê°€ì†ë„ëŠ” ì–´ë–¤ ê°’ì— ë¹„ë¡€í•˜ëŠ”ê°€?</h4>
        <div class="quiz-option" data-answer="a" data-question="2">ê¸°ìš¸ê¸° ê°ë„ì˜ ì‚¬ì¸ê°’</div>
        <div class="quiz-option" data-answer="b" data-question="2">ë¬¼ì²´ì˜ ì§ˆëŸ‰</div>
        <div class="quiz-feedback" id="feedback-q2"></div>
      </div>
    </div>
  </div>
<script>
const g = 9.8;
let angle = 20;
let mass = 0.5;
let isRunning = false;
let startTime, animationId;
let wheels = [];

let timeData = [], positionData = [], velocityData = [], accelerationData = [];
let dataPoints = [];
let chartDrawn = { position: false, velocity: false, acceleration: false };

// ì´ˆê¸° ì„¤ì •
window.onload = () => {
  // ì „ì—­ ë³€ìˆ˜ ì´ˆê¸°í™”
  window.measuredAcceleration = null;
  window.theoreticalAcceleration = null;
  window.measurementError = null;
  
  updateAngle();
  
  // ì´ë¡ ê°’ ê³„ì‚° (í™”ë©´ì—” í‘œì‹œ ì•ˆ í•¨)
  const aTheory = g * Math.sin(angle * Math.PI / 180);
  window.theoreticalAcceleration = aTheory;
  
  resetCart();
  createWheels();
};

// ë°”í€´ ìƒì„±
function createWheels() {
  // ê¸°ì¡´ ë°”í€´ ì œê±°
  wheels.forEach(wheel => wheel.remove());
  wheels = [];
  
  const cart = document.getElementById("cart");
  const cartWidth = cart.offsetWidth;
  const cartLeft = parseInt(cart.style.left) || 0;
  const cartTop = parseInt(cart.style.top) || 0;
  
  // ì•ë°”í€´ì™€ ë’·ë°”í€´ ìƒì„±
  const wheel1 = document.createElement("div");
  wheel1.className = "wheel";
  wheel1.style.left = `${cartLeft + 10}px`;
  wheel1.style.top = `${cartTop + cart.offsetHeight - 5}px`; // ì•½ê°„ ê²¹ì¹˜ê²Œ ì¡°ì •
  
  const wheel2 = document.createElement("div");
  wheel2.className = "wheel";
  wheel2.style.left = `${cartLeft + cartWidth - 25}px`;
  wheel2.style.top = `${cartTop + cart.offsetHeight - 5}px`; // ì•½ê°„ ê²¹ì¹˜ê²Œ ì¡°ì •
  
  document.querySelector(".simulation-area").appendChild(wheel1);
  document.querySelector(".simulation-area").appendChild(wheel2);
  
  wheels.push(wheel1, wheel2);
  
  // ë°”í€´ íšŒì „
  updateWheelsPosition();
}

// ê°ë„ ìŠ¬ë¼ì´ë”
document.getElementById("angle-slider").oninput = function () {
  angle = parseInt(this.value);
  document.getElementById("angle-value").textContent = angle;
  updateAngle();
  
  // ì´ë¡ ê°’ ê³„ì‚°í•˜ë˜ í™”ë©´ì— í‘œì‹œëŠ” ì•ˆ í•¨
  const aTheory = g * Math.sin(angle * Math.PI / 180);
  const fTheory = mass * aTheory;
  
  // ì´ë¡ ê°’ ì „ì—­ë³€ìˆ˜ì— ì €ì¥
  window.theoreticalAcceleration = aTheory;
  
  resetCart();
};

// ì§ˆëŸ‰ ì„ íƒ
document.querySelectorAll(".mass-option").forEach(opt => {
  opt.onclick = () => {
    document.querySelectorAll(".mass-option").forEach(o => o.classList.remove("selected"));
    opt.classList.add("selected");
    mass = parseFloat(opt.dataset.mass);
    document.getElementById("cart").textContent = mass + "kg";
    
    // ì´ë¡ ê°’ ì—…ë°ì´íŠ¸í•˜ì§€ë§Œ í™”ë©´ì—ëŠ” í‘œì‹œ ì•ˆí•¨
    if (window.theoreticalAcceleration) {
      const fTheory = mass * window.theoreticalAcceleration;
    }
  };
});

// ì‹¤í—˜ ì‹œì‘
document.getElementById("start-btn").onclick = () => {
  if (isRunning) return;
  isRunning = true;
  startTime = Date.now();
  timeData = [];
  positionData = [];
  velocityData = [];
  accelerationData = [];
  dataPoints = [];
  animateCart();
  collectData();
};

// ì´ˆê¸°í™”
document.getElementById("reset-btn").onclick = () => {
  isRunning = false;
  cancelAnimationFrame(animationId);
  resetCart();
  
  // ì „ì—­ ë³€ìˆ˜ ì´ˆê¸°í™”
  window.measuredAcceleration = null;
  window.theoreticalAcceleration = null;
  window.measurementError = null;
  
  // UI ìš”ì†Œ ì´ˆê¸°í™”
  document.getElementById("variable-emoji").style.opacity = 0;
  document.getElementById("data-table-body").innerHTML = "";
  
  // ì¸¡ì • ë° ì˜¤ì°¨ ë¶„ì„ ì„¹ì…˜ ì´ˆê¸°í™”
  document.getElementById("measured-feedback").style.display = "none";
  document.getElementById("theory-feedback").style.display = "none";
  document.getElementById("error-feedback").style.display = "none";
  
  document.getElementById("explain-measured").style.display = "none";
  document.getElementById("explain-theory").style.display = "none";
  document.getElementById("explain-error").style.display = "none";
  
  document.getElementById("measured-explanation").style.display = "none";
  document.getElementById("theory-explanation").style.display = "none";
  document.getElementById("error-explanation").style.display = "none";
  
  document.getElementById("measured-input").value = "";
  document.getElementById("theory-input").value = "";
  document.getElementById("error-input").value = "";
  
  // ë¬¸ì œ ì •ë‹µ í”¼ë“œë°± ì´ˆê¸°í™”
  document.querySelectorAll(".quiz-option").forEach(opt => {
    opt.classList.remove("selected");
  });
  document.querySelectorAll(".quiz-feedback").forEach(fb => {
    fb.style.display = "none";
    fb.classList.remove("correct", "incorrect");
  });
};

// ë¹—ë©´ íšŒì „
function updateAngle() {
  document.getElementById("inclined-plane").style.transform = `rotate(${angle}deg)`;
}

// ì¹´íŠ¸ ìœ„ì¹˜ ì´ˆê¸°í™”
function resetCart() {
  const cart = document.getElementById("cart");
  const simArea = document.querySelector(".simulation-area");
  const inclinedPlane = document.getElementById("inclined-plane");
  
  const planeWidth = inclinedPlane.offsetWidth;
  const planeLeft = parseInt(getComputedStyle(inclinedPlane).left);
  
  cart.style.left = `${planeLeft}px`;
  cart.style.top = `${50 - cart.offsetHeight}px`;
  cart.style.transform = `rotate(${angle}deg)`;
  createWheels();
}

// ë°”í€´ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
function updateWheelsPosition() {
  if (wheels.length !== 2) return;
  
  const cart = document.getElementById("cart");
  const cartWidth = cart.offsetWidth;
  const cartLeft = parseInt(cart.style.left) || 0;
  const cartTop = parseInt(cart.style.top) || 0;
  
  // ì¹´íŠ¸ ì•„ë˜ì— ì •í™•íˆ ìœ„ì¹˜í•˜ë„ë¡ ì¡°ì •
  wheels[0].style.left = `${cartLeft + 10}px`;
  wheels[0].style.top = `${cartTop + cart.offsetHeight - 5}px`; // ì•½ê°„ ê²¹ì¹˜ê²Œ ì¡°ì •
  
  wheels[1].style.left = `${cartLeft + cartWidth - 25}px`;
  wheels[1].style.top = `${cartTop + cart.offsetHeight - 5}px`; // ì•½ê°„ ê²¹ì¹˜ê²Œ ì¡°ì •
  
  // ë°”í€´ íšŒì „ ì ìš©
  wheels.forEach(wheel => {
    wheel.style.transform = `rotate(${angle}deg)`;
  });
}

// ì‹¤í—˜ ì• ë‹ˆë©”ì´ì…˜
function animateCart() {
  if (!isRunning) return;
  const t = (Date.now() - startTime) / 1000;
  const a = g * Math.sin(angle * Math.PI / 180);
  const s = 0.5 * a * t * t;
  
  const inclinedPlane = document.getElementById("inclined-plane");
  const planeWidth = inclinedPlane.offsetWidth;
  const planeLeft = parseInt(getComputedStyle(inclinedPlane).left);
  
  // ìµœëŒ€ ì´ë™ ê±°ë¦¬ë¥¼ ë¹—ë©´ì˜ ê¸¸ì´ì— ë§ì¶¤
  const maxDistance = planeWidth - 60; // ë¹—ë©´ ëê¹Œì§€ (ìˆ˜ë ˆ í¬ê¸° ê³ ë ¤)
  
  // ì†ë„ ê³„ìˆ˜ë¥¼ ê°ë„ì— ë”°ë¼ ì¡°ì • (ë†’ì€ ê°ë„ì¼ ë•Œ ë” ëŠë¦¬ê²Œ)
  const speedFactor = angle > 25 ? 80 : 100;
  const d = Math.min(s * speedFactor, maxDistance);
  
  const rad = angle * Math.PI / 180;
  const x = planeLeft + d * Math.cos(rad);
  const y = 50 + d * Math.sin(rad);
  
  const cart = document.getElementById("cart");
  cart.style.left = `${x}px`;
  cart.style.top = `${y - cart.offsetHeight}px`;
  
  // ë°”í€´ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
  updateWheelsPosition();
  
  // ìµœì í™”ëœ ë°”í€´ íšŒì „
  if (t % 0.1 < 0.01 || angle <= 25) { // í”„ë ˆì„ ìŠ¤í‚µ ì¶”ê°€
    const rotationSpeed = Math.sqrt(2 * a * s);
    wheels.forEach((wheel, index) => {
      const baseRotation = angle;
      const extraRotation = (rotationSpeed * 20 * (index === 0 ? 1 : -1)) % 360;
      wheel.style.transform = `rotate(${baseRotation + extraRotation}deg)`;
    });
  }
  
  // 2ì´ˆ ë„ë‹¬ ë˜ëŠ” ëì— ë„ë‹¬í•˜ë©´ ì‹¤í—˜ ì¢…ë£Œ
  if (d >= maxDistance || t >= 2.0) {
    stopExperiment();
    return;
  }
  
  // í”„ë ˆì„ ì œí•œìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
  const frameLimiter = angle > 25 ? 30 : 16; // ë” ë‚®ì€ í”„ë ˆì„ ì†ë„
  setTimeout(() => {
    if (isRunning) {
      animationId = requestAnimationFrame(animateCart);
    }
  }, frameLimiter);
}

// ì‹¤í—˜ ì¢…ë£Œ ì‹œ ì¸¡ì •ê°’ ë° ì´ëª¨ì§€ í‘œì‹œ
function stopExperiment() {
  isRunning = false;
  cancelAnimationFrame(animationId);
  
  // ì´ë¡ ê°’ ê³„ì‚°
  const aTheory = g * Math.sin(angle * Math.PI / 180);
  
  // ì‘ì€ ì¸¡ì • ì˜¤ì°¨ ì¶”ê°€ (Â±1%)
  const error = ((Math.random() * 2) / 100) * (Math.random() < 0.5 ? -1 : 1);
  const aMeasured = aTheory * (1 + error);
  const fMeasured = mass * aMeasured;
  const relativeError = Math.abs(error) * 100;
  
  // ì¸¡ì •ê°’ ì €ì¥ (ì „ì—­ ë³€ìˆ˜)
  window.measuredAcceleration = aMeasured;
  window.theoreticalAcceleration = aTheory;
  window.measurementError = relativeError;
  
  // ì˜¤ì°¨ì— ë”°ë¥¸ ì´ëª¨ì§€ ê²°ì •
  const emoji = document.getElementById("variable-emoji");
  if (Math.abs(error * 100) < 0.5) emoji.textContent = "ì •ìƒ";
  else if (Math.abs(error * 100) < 1) emoji.textContent = "[ë°”ëŒ]";
  else emoji.textContent = "[ë°”ëŒ][ë§ˆì°°]";
  emoji.style.opacity = 1;
  
  // ì´ë¡ ê°’ ê¸°ë°˜ìœ¼ë¡œ í‘œì¤€í™”ëœ ë°ì´í„° ì²˜ë¦¬
  processStandardizedData();
  
  // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
  drawAllCharts();
}

// ë°ì´í„° ìˆ˜ì§‘
function collectData() {
  if (!isRunning) return;
  const t = (Date.now() - startTime) / 1000;
  if (t > 2.1) return; // 2ì´ˆê¹Œì§€ë§Œ ìˆ˜ì§‘
  
  // ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ ë°ì´í„° ê³„ì‚° (ì˜¤ì°¨ ìµœì†Œí™”)
  const errorFactor = 1 + (Math.random() * 0.002 - 0.001); // Â±0.1% ì˜¤ì°¨ (ë” ì •ë°€í•˜ê²Œ)
  const a = g * Math.sin(angle * Math.PI / 180) * errorFactor;
  const s = 0.5 * a * t * t;
  const v = a * t;
  
  // ëª¨ë“  ë°ì´í„° í¬ì¸íŠ¸ ì €ì¥
  dataPoints.push({
    time: t,
    position: s,
    velocity: v,
    acceleration: a
  });
  
  setTimeout(collectData, 30); // ë°ì´í„° ìˆ˜ì§‘ ê°„ê²©
}

// í‘œì¤€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ë°ì´í„° ì²˜ë¦¬ (0.1ì´ˆ ê°„ê²©)
function processStandardizedData() {
  timeData = [];
  positionData = [];
  velocityData = [];
  accelerationData = [];
  
  // ì´ë¡ ì ì¸ ê°’ìœ¼ë¡œ ì¼ê´€ëœ ë°ì´í„° ìƒì„± (ì¸¡ì • ë°ì´í„° ëŒ€ì‹ )
  const theoryAcc = g * Math.sin(angle * Math.PI / 180);
  
  // 0ì´ˆë¶€í„° 2.0ì´ˆê¹Œì§€ 0.1ì´ˆ ê°„ê²©ìœ¼ë¡œ ì´ë¡ ê°’ ê¸°ë°˜ ë°ì´í„° ìƒì„±
  for (let t = 0; t <= 2.0; t += 0.1) {
    const roundedT = Math.round(t * 10) / 10; // ì •í™•í•œ 0.1ì´ˆ ê°„ê²©
    
    // í‘œì¤€ ê³µì‹ìœ¼ë¡œ ê³„ì‚°ëœ ê°’
    const s = 0.5 * theoryAcc * roundedT * roundedT;
    const v = theoryAcc * roundedT;
    
    // ê°€ì†ë„ëŠ” ì¼ì •í•˜ê²Œ, ìœ„ì¹˜ì™€ ì†ë„ì—ë§Œ ì‘ì€ ì˜¤ì°¨ ì¶”ê°€
    const posErrorFactor = 1 + (Math.sin(roundedT * 5) * 0.002); // ì‘ì€ ì˜¤ì°¨
    const velErrorFactor = 1 + (Math.sin(roundedT * 5) * 0.003); // ì‘ì€ ì˜¤ì°¨
    
    timeData.push(roundedT.toFixed(1));
    positionData.push(s * posErrorFactor);
    velocityData.push(v * velErrorFactor);
    accelerationData.push(theoryAcc); // ê°€ì†ë„ëŠ” ì¼ì •í•˜ê²Œ ìœ ì§€
  }
  
  // ë°ì´í„° í…Œì´ë¸” ì—…ë°ì´íŠ¸ (í…Œì´ë¸”ì€ 0.2ì´ˆ ê°„ê²© ìœ ì§€)
  updateDataTable();
}

// ë°ì´í„° í…Œì´ë¸” í‘œì‹œ (0~2.0ì´ˆ, 0.2ì´ˆ ê°„ê²©ë§Œ í‘œì‹œ)
function updateDataTable() {
  const tbody = document.getElementById("data-table-body");
  tbody.innerHTML = "";
  
  for (let i = 0; i < timeData.length; i++) {
    const t = parseFloat(timeData[i]);
    // 0.2ì´ˆ ê°„ê²©ì˜ ë°ì´í„°ë§Œ í‘œì‹œ (0.0, 0.2, 0.4, ...)
    if (Math.abs(t * 10 % 2) > 0.01) continue;
    
    const x = positionData[i] * 100; // cm ë‹¨ìœ„ë¡œ ë³€í™˜
    
    // ì´ì „ 0.2ì´ˆ ê°„ê²© ë°ì´í„° ì°¾ê¸°
    let prevIndex = -1;
    for (let j = i-1; j >= 0; j--) {
      if (Math.abs(parseFloat(timeData[j]) * 10 % 2) < 0.01) {
        prevIndex = j;
        break;
      }
    }
    
    const dx = prevIndex === -1 ? "-" : ((positionData[i] - positionData[prevIndex]) * 100).toFixed(2);
    const v = prevIndex === -1 ? "-" : (parseFloat(dx) / 0.2).toFixed(2); // 0.2ì´ˆ ê°„ê²©ìœ¼ë¡œ ì†ë ¥ ê³„ì‚°
    
    tbody.innerHTML += `<tr>
      <td>${t.toFixed(1)}</td>
      <td>${x.toFixed(2)}</td>
      <td>${dx}</td>
      <td>${v}</td>
    </tr>`;
  }
}

// ëª¨ë“  ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
function drawAllCharts() {
  // ê·¸ë˜í”„ ì´ˆê¸°í™” ë° ë‹¤ì‹œ ê·¸ë¦¬ê¸°
  chartDrawn = { position: false, velocity: false, acceleration: false };
  drawChart("position");
  drawChart("velocity");
  drawChart("acceleration");
}

// ì§ˆë¬¸ í™•ì¸ ë° í•´ì„¤ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
document.getElementById("check-measured").onclick = () => {
  const val = parseFloat(document.getElementById("measured-input").value);
  
  // ì „ì—­ ë³€ìˆ˜ì—ì„œ ì¸¡ì •ê°’ ê°€ì ¸ì˜¤ê¸°
  const measured = window.measuredAcceleration;
  
  if (!measured) {
    // ì•„ì§ ì¸¡ì •ê°’ì´ ì—†ëŠ” ê²½ìš°
    const fb = document.getElementById("measured-feedback");
    fb.className = "feedback error";
    fb.style.display = "block";
    fb.innerHTML = "ë¨¼ì € ì‹¤í—˜ì„ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤!";
    return;
  }
  
  const error = Math.abs(val - measured) / measured * 100;
  const fb = document.getElementById("measured-feedback");
  fb.style.display = "block";
  
  if (error <= 0.5) {
    fb.className = "feedback success";
    fb.innerHTML = `ì •í™•í•©ë‹ˆë‹¤! (ì˜¤ì°¨: ${error.toFixed(2)}%)`;
  } else if (error <= 3) {
    fb.className = "feedback success";
    fb.innerHTML = `ê·¼ì ‘í•©ë‹ˆë‹¤. (ì˜¤ì°¨: ${error.toFixed(2)}%)`;
  } else {
    fb.className = "feedback error";
    fb.innerHTML = `ì¸¡ì •ëœ ê°€ì†ë„ëŠ” ${measured.toFixed(2)} m/sÂ²ì…ë‹ˆë‹¤.`;
  }
  
  // í•´ì„¤ ë²„íŠ¼ í‘œì‹œ
  document.getElementById("explain-measured").style.display = "inline-block";
  
  // í•´ì„¤ ë‚´ìš© ì—…ë°ì´íŠ¸
  document.getElementById("measured-acc-value").textContent = measured.toFixed(2);
};

// ì¸¡ì • ê°€ì†ë„ í•´ì„¤ ë²„íŠ¼
document.getElementById("explain-measured").onclick = () => {
  const explainDiv = document.getElementById("measured-explanation");
  explainDiv.style.display = explainDiv.style.display === "none" ? "block" : "none";
};

document.getElementById("check-theory").onclick = () => {
  const val = parseFloat(document.getElementById("theory-input").value);
  const theory = g * Math.sin(angle * Math.PI / 180);
  
  const error = Math.abs(val - theory) / theory * 100;
  const fb = document.getElementById("theory-feedback");
  fb.style.display = "block";
  
  if (error <= 0.5) {
    fb.className = "feedback success";
    fb.innerHTML = `ì •í™•í•©ë‹ˆë‹¤! (ì˜¤ì°¨: ${error.toFixed(2)}%)`;
  } else if (error <= 3) {
    fb.className = "feedback success";
    fb.innerHTML = `ê·¼ì ‘í•©ë‹ˆë‹¤. (ì˜¤ì°¨: ${error.toFixed(2)}%)`;
  } else {
    fb.className = "feedback error";
    fb.innerHTML = `ì´ë¡ ê°’: ${theory.toFixed(2)} m/sÂ² (a = gÂ·sin(Î¸))`;
  }
  
  // í•´ì„¤ ë²„íŠ¼ í‘œì‹œ
  document.getElementById("explain-theory").style.display = "inline-block";
  
  // í•´ì„¤ ë‚´ìš© ì—…ë°ì´íŠ¸
  document.getElementById("angle-display").textContent = angle;
  document.getElementById("theory-acc-value").textContent = theory.toFixed(2);
};

// ì´ë¡  ê°€ì†ë„ í•´ì„¤ ë²„íŠ¼
document.getElementById("explain-theory").onclick = () => {
  const explainDiv = document.getElementById("theory-explanation");
  explainDiv.style.display = explainDiv.style.display === "none" ? "block" : "none";
};

document.getElementById("check-error").onclick = () => {
  const val = parseFloat(document.getElementById("error-input").value);
  
  // ì „ì—­ ë³€ìˆ˜ì—ì„œ ì¸¡ì •ê°’, ì´ë¡ ê°’ ê°€ì ¸ì˜¤ê¸°
  const measured = window.measuredAcceleration;
  const theory = window.theoreticalAcceleration;
  
  if (!measured) {
    // ì•„ì§ ì¸¡ì •ê°’ì´ ì—†ëŠ” ê²½ìš°
    const fb = document.getElementById("error-feedback");
    fb.className = "feedback error";
    fb.style.display = "block";
    fb.innerHTML = "ë¨¼ì € ì‹¤í—˜ì„ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤!";
    return;
  }
  
  const actualError = Math.abs(measured - theory) / theory * 100;
  const userError = Math.abs(val - actualError);
  
  const fb = document.getElementById("error-feedback");
  fb.style.display = "block";
  
  if (userError <= 0.1) {
    fb.className = "feedback success";
    fb.innerHTML = `ì •í™•í•©ë‹ˆë‹¤! ì˜¤ì°¨ëŠ” ${actualError.toFixed(2)}%ì…ë‹ˆë‹¤.`;
  } else if (userError <= 0.5) {
    fb.className = "feedback success";
    fb.innerHTML = `ê·¼ì ‘í•©ë‹ˆë‹¤. ì‹¤ì œ ì˜¤ì°¨ëŠ” ${actualError.toFixed(2)}%ì…ë‹ˆë‹¤.`;
  } else {
    fb.className = "feedback error";
    fb.innerHTML = `ì˜¤ì°¨ = |${measured.toFixed(2)}-${theory.toFixed(2)}|/${theory.toFixed(2)}Ã—100 = ${actualError.toFixed(2)}%`;
  }
  
  // í•´ì„¤ ë²„íŠ¼ í‘œì‹œ
  document.getElementById("explain-error").style.display = "inline-block";
  
  // í•´ì„¤ ë‚´ìš© ì—…ë°ì´íŠ¸
  document.getElementById("error-measured-value").textContent = measured.toFixed(2);
  document.getElementById("error-theory-value").textContent = theory.toFixed(2);
  document.getElementById("error-value").textContent = actualError.toFixed(2);
};

// ìƒëŒ€ì˜¤ì°¨ í•´ì„¤ ë²„íŠ¼
document.getElementById("explain-error").onclick = () => {
  const explainDiv = document.getElementById("error-explanation");
  explainDiv.style.display = explainDiv.style.display === "none" ? "block" : "none";
};

// íƒ­ ì „í™˜
document.querySelectorAll(".tab-btn").forEach(btn => {
  btn.onclick = () => {
    document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    const tab = btn.dataset.tab;
    btn.classList.add("active");
    document.getElementById(tab).classList.add("active");
    
    if (!chartDrawn[tab] && ["position", "velocity", "acceleration"].includes(tab)) {
      setTimeout(() => drawChart(tab), 100);
    }
  };
});

// ê·¸ë˜í”„ ìƒì„±
function drawChart(tab) {
  const ctx = document.getElementById(`${tab}-chart`).getContext("2d");
  const data = tab === "position" ? positionData : tab === "velocity" ? velocityData : accelerationData;
  const label = tab === "position" ? "ìœ„ì¹˜(m)" : tab === "velocity" ? "ì†ë„(m/s)" : "ê°€ì†ë„(m/sÂ²)";
  const color = tab === "position" ? "#2980b9" : tab === "velocity" ? "#2ecc71" : "#e67e22";
  
  // ì´ì „ ì°¨íŠ¸ íŒŒê´´
  Chart.getChart(`${tab}-chart`)?.destroy();
  
  // Yì¶• ë²”ìœ„ ê³„ì‚° - ë§¤ìš° ê°„ì†Œí™”ëœ ë²”ìœ„
  let maxValue, minValue;
  
  if (tab === "position") {
    // 2ì´ˆ í›„ì˜ ìœ„ì¹˜ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœëŒ€ê°’ ì„¤ì •
    let estimatedMax = g * Math.sin(angle * Math.PI / 180) * 2.0 * 2.0 / 2;
    minValue = 0;
    maxValue = Math.ceil(estimatedMax);
  } else if (tab === "velocity") {
    // 2ì´ˆ í›„ì˜ ì†ë„ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœëŒ€ê°’ ì„¤ì •
    let estimatedMax = g * Math.sin(angle * Math.PI / 180) * 2.0;
    minValue = 0;
    maxValue = Math.ceil(estimatedMax);
  } else { // ê°€ì†ë„
    // ê°€ì†ë„ëŠ” ì¼ì •í•œ ê°’
    const theoreticalAcc = g * Math.sin(angle * Math.PI / 180);
    // ê°’ì˜ 10% ë²”ìœ„ë¡œ ì„¤ì •
    const margin = theoreticalAcc * 0.1;
    minValue = theoreticalAcc - margin;
    maxValue = theoreticalAcc + margin;
    
    // ì†Œìˆ˜ì  í•œ ìë¦¬ë¡œ ë°˜ì˜¬ë¦¼
    minValue = Math.floor(minValue * 10) / 10;
    maxValue = Math.ceil(maxValue * 10) / 10;
  }
  
  // ê°„ê²© ê³„ì‚° - ë§¤ìš° ë‹¨ìˆœí™”
  let stepSize;
  if (tab === "acceleration") {
    stepSize = (maxValue - minValue) / 2; // ê°€ì†ë„ëŠ” 2-3ê°œì˜ ëˆˆê¸ˆë§Œ
  } else {
    if (maxValue <= 1) {
      stepSize = 0.5; // ë” ë„“ì€ ê°„ê²©
    } else if (maxValue <= 3) {
      stepSize = 1;
    } else if (maxValue <= 6) {
      stepSize = 2;
    } else {
      stepSize = 5;
    }
  }
  
  // ë°ì´í„° í¬ì¸íŠ¸ í‘œì‹œ ì„¤ì • - 0.2ì´ˆ ê°„ê²©ìœ¼ë¡œ í¬ì¸íŠ¸ë§Œ í‘œì‹œ
  const pointRadius = [];
  const pointBorderWidth = [];
  
  // 0.2ì´ˆ ê°„ê²©ë§ˆë‹¤ í¬ì¸íŠ¸ í‘œì‹œ, ë‚˜ë¨¸ì§€ëŠ” ìˆ¨ê¹€
  for (let i = 0; i < timeData.length; i++) {
    const t = parseFloat(timeData[i]);
    if (Math.abs(t * 10 % 2) < 0.01) { // 0.2ì´ˆ ê°„ê²© (0.0, 0.2, 0.4...)
      pointRadius.push(4);
      pointBorderWidth.push(2);
    } else {
      pointRadius.push(0);
      pointBorderWidth.push(0);
    }
  }
  
  new Chart(ctx, {
    type: "line",
    data: {
      labels: timeData,
      datasets: [{
        label: label,
        data: data.map(v => parseFloat(v).toFixed(2)),
        borderColor: color,
        backgroundColor: color,
        borderWidth: 2,
        fill: false,
        pointRadius: pointRadius, // 0.2ì´ˆ ê°„ê²©ì—ë§Œ í¬ì¸íŠ¸ í‘œì‹œ
        pointBorderWidth: pointBorderWidth,
        pointBackgroundColor: "#fff", // í¬ì¸íŠ¸ ë‚´ë¶€ ìƒ‰ìƒ
        pointBorderColor: color, // í¬ì¸íŠ¸ í…Œë‘ë¦¬ ìƒ‰ìƒ
        tension: tab === "acceleration" ? 0 : 0.1 // ê°€ì†ë„ëŠ” ì§ì„ ìœ¼ë¡œ
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      aspectRatio: 3, // ì ë‹¹í•œ ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨
      layout: {
        padding: {
          top: 2,
          bottom: 2
        }
      },
      scales: {
        x: { 
          title: { 
            display: true, 
            text: "ì‹œê°„ (s)",
            font: {
              weight: 'bold',
              size: 10 
            },
            padding: {top: 2, bottom: 2}
          },
          grid: {
            display: true,
            color: 'rgba(0, 0, 0, 0.1)'
          },
          ticks: {
            font: {
              size: 9
            },
            padding: 2,
            callback: function(value, index, values) {
              // Xì¶•ì— 0.5ì´ˆ ê°„ê²©ìœ¼ë¡œë§Œ ë ˆì´ë¸” í‘œì‹œ
              const t = this.getLabelForValue(value);
              return parseFloat(t) % 0.5 < 0.01 ? t : '';
            }
          }
        },
        y: { 
          title: { 
            display: true, 
            text: label,
            font: {
              weight: 'bold',
              size: 10
            },
            padding: {top: 2, bottom: 2}
          },
          min: minValue,
          max: maxValue,
          grid: {
            display: true,
            color: 'rgba(0, 0, 0, 0.1)'
          },
          ticks: {
            font: {
              size: 9
            },
            padding: 2,
            stepSize: stepSize,
            count: tab === "acceleration" ? 3 : 3 // 3ê°œ ëˆˆê¸ˆìœ¼ë¡œ ë˜ëŒë¦¼
          }
        }
      },
      plugins: {
        tooltip: {
          enabled: true, // íˆ´íŒ í™œì„±í™” (ë°ì´í„° ê°’ í‘œì‹œ)
          backgroundColor: 'rgba(0, 0, 0, 0.7)',
          titleFont: {
            size: 10
          },
          bodyFont: {
            size: 10
          },
          padding: 6,
          callbacks: {
            label: function(context) {
              let label = context.dataset.label || '';
              if (label) {
                label += ': ';
              }
              label += parseFloat(context.parsed.y).toFixed(2);
              return label;
            }
          }
        },
        legend: {
          display: false // ë²”ë¡€ ìˆ¨ê¹€
        }
      }
    }
  });
  
  chartDrawn[tab] = true;
}

// ë¬¸ì œ ì •ë‹µ í”¼ë“œë°±
document.querySelectorAll(".quiz-option").forEach(opt => {
  opt.onclick = function() {
    // í˜„ì¬ ì„ íƒëœ ì˜µì…˜ì— ëŒ€í•œ ì •ë³´ ì–»ê¸°
    const optionText = this.textContent;
    const optionAnswer = this.dataset.answer;
    const questionNum = this.dataset.question; // ë¬¸ì œ ë²ˆí˜¸ (1 ë˜ëŠ” 2)
    
    // í˜„ì¬ ë¬¸ì œ ê·¸ë£¹ ë‚´ì˜ ëª¨ë“  ì˜µì…˜ ê°€ì ¸ì˜¤ê¸°
    const questionGroup = this.closest(".quiz-question");
    const allOptions = questionGroup.querySelectorAll(".quiz-option");
    
    // í”¼ë“œë°± ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const feedback = document.getElementById(`feedback-q${questionNum}`);
    
    // ì •ë‹µ í™•ì¸
    const correctAnswer = questionNum === "1" ? "b" : "a";
    const isCorrect = optionAnswer === correctAnswer;
    
    // ì„ íƒëœ ì˜µì…˜ ìŠ¤íƒ€ì¼ ë³€ê²½
    allOptions.forEach(option => option.classList.remove("selected"));
    this.classList.add("selected");
    
    // í”¼ë“œë°± ë©”ì‹œì§€ ì„¤ì •
    feedback.className = "quiz-feedback"; // í´ë˜ìŠ¤ ì´ˆê¸°í™”
    
    if (isCorrect) {
      feedback.classList.add("correct");
      
      if (questionNum === "1") {
        feedback.innerHTML = "<strong>ì •ë‹µì…ë‹ˆë‹¤!</strong><br>" + 
          "ë“±ê°€ì†ë„ ìš´ë™ì—ì„œëŠ” ê°€ì†ë„ê°€ ì¼ì •í•˜ê¸° ë•Œë¬¸ì— ì†ë„ëŠ” ì‹œê°„ì— ë”°ë¼ ì¼ì •í•˜ê²Œ ì¦ê°€í•©ë‹ˆë‹¤. " + 
          "ë”°ë¼ì„œ ì‹œê°„-ì†ë„ ê·¸ë˜í”„ëŠ” ê¸°ìš¸ê¸°ê°€ ì¼ì •í•œ ì§ì„ ì´ ë©ë‹ˆë‹¤. " + 
          "ë°˜ë©´, ì‹œê°„-ìœ„ì¹˜ ê·¸ë˜í”„ëŠ” 2ì°¨ í•¨ìˆ˜ í˜•íƒœì˜ ê³¡ì„ ì´ë©°, ê°€ì†ë„-ì‹œê°„ ê·¸ë˜í”„ëŠ” ìˆ˜í‰ì„ ì…ë‹ˆë‹¤.";
      } else {
        feedback.innerHTML = "<strong>ì •ë‹µì…ë‹ˆë‹¤!</strong><br>" + 
          "ë¹—ë©´ì—ì„œì˜ ê°€ì†ë„ëŠ” ì¤‘ë ¥ê°€ì†ë„(g)ì™€ ê¸°ìš¸ê¸° ê°ë„ì˜ ì‚¬ì¸ê°’(sin Î¸)ì˜ ê³±ì…ë‹ˆë‹¤: a = gÂ·sin(Î¸). " + 
          "ì§ˆëŸ‰ì€ ê°€ì†ë„ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” ë‰´í„´ì˜ ì œ2ë²•ì¹™(F = ma)ê³¼ ì¤‘ë ¥(F = mg)ì—ì„œ " + 
          "ì§ˆëŸ‰ì´ ìƒì‡„ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.";
      }
    } else {
      feedback.classList.add("incorrect");
      
      if (questionNum === "1") {
        feedback.innerHTML = "<strong>ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë³´ì„¸ìš”.</strong><br>" + 
          "ë“±ê°€ì†ë„ ìš´ë™ì—ì„œ ê·¸ë˜í”„ì˜ í˜•íƒœë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”. ê°€ì†ë„ê°€ ì¼ì •í•  ë•Œ ìœ„ì¹˜ì™€ ì†ë„ëŠ” ì‹œê°„ì— ë”°ë¼ ì–´ë–»ê²Œ ë³€í•˜ë‚˜ìš”?";
      } else {
        feedback.innerHTML = "<strong>ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë³´ì„¸ìš”.</strong><br>" + 
          "ë¹—ë©´ì—ì„œ ë¬¼ì²´ì˜ ê°€ì†ë„ëŠ” ì–´ë–¤ ìš”ì†Œì— ì˜í–¥ì„ ë°›ì„ê¹Œìš”? ë‰´í„´ì˜ ì œ2ë²•ì¹™(F = ma)ê³¼ ì¤‘ë ¥(F = mg)ì˜ ê´€ê³„ë¥¼ ìƒê°í•´ë³´ì„¸ìš”.";
      }
    }
    
    // í”¼ë“œë°± í‘œì‹œ
    feedback.style.display = "block";
  };
});
</script>
</body>
</html>
