<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë³´ì¼ì˜ ë²•ì¹™ ì‹œë®¬ë ˆì´ì…˜ - ì••ë ¥ê³¼ ë¶€í”¼ì˜ ê´€ê³„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .achievement {
            background: #edf2f7;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .achievement h3 {
            color: #4a5568;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .achievement p {
            color: #718096;
            line-height: 1.6;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .control-panel {
            background: #f7fafc;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-group label {
            display: block;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #cbd5e0;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102,126,234,0.4);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            cursor: pointer;
        }

        .value-display {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 1.2em;
            font-weight: 600;
            color: #667eea;
            text-align: center;
            border: 2px solid #667eea;
        }

        .simulation-area {
            background: #ffffff;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            min-height: 500px;
            position: relative;
        }

        #container {
            margin: 30px auto;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cylinder {
            border: 4px solid #2d3748;
            border-radius: 10px;
            background: rgba(102, 126, 234, 0.1);
            position: relative;
            transition: all 0.5s ease;
            display: flex;
            flex-wrap: wrap;
            align-content: center;
            justify-content: center;
            padding: 10px;
        }

        .piston {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 25px;
            background: linear-gradient(180deg, #a0aec0 0%, #718096 100%);
            border: 3px solid #2d3748;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.2);
        }

        .piston::after {
            content: 'â†“ ì••ë ¥';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: 600;
            color: #2d3748;
            font-size: 0.9em;
        }

        .particle {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: relative;
            margin: 3px;
            animation: jiggle 0.5s infinite alternate;
        }

        @keyframes jiggle {
            0% { transform: translate(0, 0); }
            100% { transform: translate(2px, -2px); }
        }

        .data-section {
            margin-top: 30px;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .data-card {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }

        .data-card h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: #edf2f7;
        }

        #chart {
            width: 100%;
            height: 300px;
            background: white;
            border-radius: 8px;
            position: relative;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 15px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102,126,234,0.4);
        }

        .btn-secondary {
            background: #48bb78;
            color: white;
        }

        .btn-secondary:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(72,187,120,0.4);
        }

        .btn-reset {
            background: #ed8936;
            color: white;
        }

        .btn-reset:hover {
            background: #dd6b20;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(237,137,54,0.4);
        }

        .quiz-section {
            background: #fff5f5;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #fc8181;
            margin-top: 30px;
        }

        .quiz-section h3 {
            color: #c53030;
            margin-bottom: 15px;
        }

        .quiz-question {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
            margin-top: 15px;
        }

        .quiz-option {
            padding: 12px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background: #edf2f7;
            border-color: #667eea;
        }

        .quiz-option.correct {
            background: #c6f6d5;
            border-color: #48bb78;
        }

        .quiz-option.incorrect {
            background: #fed7d7;
            border-color: #fc8181;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
        }

        .feedback.correct {
            background: #c6f6d5;
            color: #22543d;
        }

        .feedback.incorrect {
            background: #fed7d7;
            color: #742a2a;
        }

        .real-life-examples {
            background: #fffaf0;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #ed8936;
            margin-top: 30px;
        }

        .real-life-examples h3 {
            color: #c05621;
            margin-bottom: 15px;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .example-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #fbd38d;
            cursor: pointer;
            transition: all 0.3s;
        }

        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(237,137,54,0.2);
        }

        .example-card h4 {
            color: #2d3748;
            margin-bottom: 8px;
        }

        .example-card p {
            color: #4a5568;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            position: relative;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 2em;
            font-weight: bold;
            cursor: pointer;
            color: #a0aec0;
        }

        .close:hover {
            color: #2d3748;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .data-grid {
                grid-template-columns: 1fr;
            }
        }

        .law-formula {
            background: #e6fffa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #38b2ac;
            margin-top: 20px;
            text-align: center;
        }

        .law-formula h4 {
            color: #234e52;
            margin-bottom: 10px;
        }

        .formula {
            font-size: 1.5em;
            font-weight: 700;
            color: #2c7a7b;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>âš—ï¸ ë³´ì¼ì˜ ë²•ì¹™ ì‹œë®¬ë ˆì´ì…˜</h1>
            <p style="color: #718096; font-size: 1.1em; margin-top: 10px;">ì••ë ¥ ë³€í™”ì— ë”°ë¥¸ ê¸°ì²´ì˜ ë¶€í”¼ ë³€í™” ê´€ì°°</p>
            
            <div class="achievement">
                <h3>ğŸ“š ì„±ì·¨ê¸°ì¤€: ì¤‘1 ê³¼í•™ 4-2-03</h3>
                <p>"ê¸°ì²´ì˜ ë¶€í”¼ê°€ ì••ë ¥ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” í˜„ìƒì„ ê´€ì°°í•˜ê³ , ì…ì ëª¨í˜•ìœ¼ë¡œ ì„¤ëª…í•œë‹¤."</p>
            </div>
        </header>

        <div class="main-content">
            <div class="control-panel">
                <h2 style="color: #2d3748; margin-bottom: 20px;">ğŸ›ï¸ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h2>
                
                <div class="control-group">
                    <label for="pressure">ì••ë ¥ (atm)</label>
                    <input type="range" id="pressure" min="0.5" max="5" step="0.1" value="1">
                    <div class="value-display" id="pressureValue">1.0 atm</div>
                </div>

                <div class="control-group">
                    <label for="initialVolume">ì´ˆê¸° ë¶€í”¼ ì„¤ì •</label>
                    <select id="initialVolume">
                        <option value="2">2.0 L</option>
                        <option value="3">3.0 L</option>
                        <option value="4">4.0 L</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="gasType">ê¸°ì²´ ì¢…ë¥˜</label>
                    <select id="gasType">
                        <option value="oxygen">ì‚°ì†Œ (Oâ‚‚)</option>
                        <option value="nitrogen">ì§ˆì†Œ (Nâ‚‚)</option>
                        <option value="hydrogen">ìˆ˜ì†Œ (Hâ‚‚)</option>
                        <option value="co2">ì´ì‚°í™”íƒ„ì†Œ (COâ‚‚)</option>
                    </select>
                </div>

                <div class="law-formula">
                    <h4>ë³´ì¼ì˜ ë²•ì¹™</h4>
                    <div class="formula">P Ã— V = ì¼ì •</div>
                    <p style="color: #2c7a7b; margin-top: 10px;">ì˜¨ë„ê°€ ì¼ì •í•  ë•Œ, ê¸°ì²´ì˜ ì••ë ¥ê³¼ ë¶€í”¼ëŠ” ë°˜ë¹„ë¡€í•©ë‹ˆë‹¤.</p>
                </div>

                <div class="button-group">
                    <button class="btn-primary" onclick="recordData()">ğŸ“Š ë°ì´í„° ê¸°ë¡</button>
                    <button class="btn-reset" onclick="resetSimulation()">ğŸ”„ ì´ˆê¸°í™”</button>
                </div>
            </div>

            <div class="simulation-area">
                <h2 style="color: #2d3748; margin-bottom: 20px;">ğŸ”¬ ì…ì ëª¨í˜• ì‹œë®¬ë ˆì´ì…˜</h2>
                <div id="container">
                    <div class="cylinder" id="cylinder">
                        <div class="piston"></div>
                    </div>
                </div>
                <div class="value-display" style="margin-top: 20px;">
                    í˜„ì¬ ë¶€í”¼: <span id="volumeValue">2.00</span> L
                </div>
                <p style="text-align: center; color: #718096; margin-top: 15px;">
                    ğŸ’¡ ì…ìì˜ ê°œìˆ˜ì™€ í¬ê¸°ëŠ” ë³€í•˜ì§€ ì•Šê³ , ì…ì ê°„ ê±°ë¦¬ë§Œ ë³€í™”í•©ë‹ˆë‹¤.
                </p>
            </div>
        </div>

        <div class="data-section">
            <div class="data-grid">
                <div class="data-card">
                    <h3>ğŸ“ˆ ì‹¤í—˜ ë°ì´í„° ê¸°ë¡</h3>
                    <table id="dataTable">
                        <thead>
                            <tr>
                                <th>ì••ë ¥ (atm)</th>
                                <th>ë¶€í”¼ (L)</th>
                                <th>P Ã— V</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody">
                        </tbody>
                    </table>
                </div>

                <div class="data-card">
                    <h3>ğŸ“‰ ì••ë ¥-ë¶€í”¼ ê·¸ë˜í”„</h3>
                    <canvas id="chart"></canvas>
                </div>
            </div>
        </div>

        <div class="quiz-section">
            <h3>ğŸ¯ ê°œë… í™•ì¸ í€´ì¦ˆ</h3>
            <div class="quiz-question" id="quiz1">
                <p style="font-weight: 600; margin-bottom: 10px;">Q1. ì••ë ¥ì´ 2ë°°ê°€ ë˜ë©´ ë¶€í”¼ëŠ” ì–´ë–»ê²Œ ë³€í• ê¹Œìš”?</p>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkAnswer(1, 'half')">â‘  ì ˆë°˜ìœ¼ë¡œ ì¤„ì–´ë“ ë‹¤</div>
                    <div class="quiz-option" onclick="checkAnswer(1, 'double')">â‘¡ 2ë°°ê°€ ëœë‹¤</div>
                    <div class="quiz-option" onclick="checkAnswer(1, 'same')">â‘¢ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤</div>
                    <div class="quiz-option" onclick="checkAnswer(1, 'triple')">â‘£ 3ë°°ê°€ ëœë‹¤</div>
                </div>
                <div id="feedback1"></div>
            </div>

            <div class="quiz-question" id="quiz2">
                <p style="font-weight: 600; margin-bottom: 10px;">Q2. ì‚° ì •ìƒì—ì„œ í˜íŠ¸ë³‘ì´ ë¶€í’€ì–´ ì˜¤ë¥´ëŠ” ì´ìœ ëŠ”?</p>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkAnswer(2, 'temperature')">â‘  ì˜¨ë„ê°€ ë†’ì•„ì ¸ì„œ</div>
                    <div class="quiz-option" onclick="checkAnswer(2, 'pressure')">â‘¡ ëŒ€ê¸°ì••ì´ ë‚®ì•„ì ¸ì„œ</div>
                    <div class="quiz-option" onclick="checkAnswer(2, 'particles')">â‘¢ ì…ì ìˆ˜ê°€ ì¦ê°€í•´ì„œ</div>
                    <div class="quiz-option" onclick="checkAnswer(2, 'gravity')">â‘£ ì¤‘ë ¥ì´ ì•½í•´ì ¸ì„œ</div>
                </div>
                <div id="feedback2"></div>
            </div>
        </div>

        <div class="real-life-examples">
            <h3>ğŸŒ ì‹¤ìƒí™œ ì ìš© ì‚¬ë¡€</h3>
            <div class="examples-grid">
                <div class="example-card" onclick="showExample('bottle')">
                    <h4>ğŸ”ï¸ ì‚° ì •ìƒì˜ í˜íŠ¸ë³‘</h4>
                    <p>ë†’ì€ ê³³ì—ì„œ ë°€íëœ ë³‘ì´ ë¶€í’€ì–´ ì˜¤ë¦…ë‹ˆë‹¤.</p>
                </div>
                <div class="example-card" onclick="showExample('bubble')">
                    <h4>ğŸ¤¿ ì ìˆ˜ë¶€ì˜ ê³µê¸° ë°©ìš¸</h4>
                    <p>ìˆ˜ë©´ìœ¼ë¡œ ì˜¬ë¼ì˜¬ìˆ˜ë¡ ë°©ìš¸ì´ ì»¤ì§‘ë‹ˆë‹¤.</p>
                </div>
                <div class="example-card" onclick="showExample('wrap')">
                    <h4>ğŸ“¦ ë½ë½ì´</h4>
                    <p>ì†ìœ¼ë¡œ ëˆ„ë¥´ë©´ ì••ë ¥ì´ ë†’ì•„ì ¸ í„°ì§‘ë‹ˆë‹¤.</p>
                </div>
                <div class="example-card" onclick="showExample('syringe')">
                    <h4>ğŸ’‰ ì£¼ì‚¬ê¸°</h4>
                    <p>í”¼ìŠ¤í†¤ì„ ëˆ„ë¥´ë©´ ë¶€í”¼ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>

        <div class="button-group" style="margin-top: 30px;">
            <button class="btn-secondary" onclick="generateReport()">ğŸ“„ ì‹¤í—˜ ë³´ê³ ì„œ ìƒì„±</button>
        </div>
    </div>

    <div id="exampleModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        const gasColors = {
            oxygen: '#3182ce',
            nitrogen: '#805ad5',
            hydrogen: '#e53e3e',
            co2: '#38a169'
        };

        let initialVolume = 2;
        let constantPV = 2; // P(1 atm) Ã— V(2 L) = 2
        let dataPoints = [];
        let chart = null;

        function updateSimulation() {
            const pressure = parseFloat(document.getElementById('pressure').value);
            const gasType = document.getElementById('gasType').value;
            
            // ë³´ì¼ì˜ ë²•ì¹™: V = constant / P
            const volume = constantPV / pressure;
            
            // ì••ë ¥ í‘œì‹œ ì—…ë°ì´íŠ¸
            document.getElementById('pressureValue').textContent = pressure.toFixed(1) + ' atm';
            document.getElementById('volumeValue').textContent = volume.toFixed(2);
            
            // ì‹¤ë¦°ë” í¬ê¸° ì¡°ì • (ë¶€í”¼ì— ë¹„ë¡€)
            const cylinder = document.getElementById('cylinder');
            const baseHeight = 200;
            const baseWidth = 150;
            const newHeight = baseHeight * (volume / initialVolume);
            const newWidth = baseWidth * Math.sqrt(volume / initialVolume);
            
            cylinder.style.height = newHeight + 'px';
            cylinder.style.width = newWidth + 'px';
            
            // ì…ì ìƒì„±
            updateParticles(volume, gasType);
        }

        function updateParticles(volume, gasType) {
            const cylinder = document.getElementById('cylinder');
            const particleCount = 30; // ê³ ì •ëœ ì…ì ìˆ˜
            
            // ê¸°ì¡´ ì…ì ì œê±°
            const existingParticles = cylinder.querySelectorAll('.particle');
            existingParticles.forEach(p => p.remove());
            
            // ì…ì ê°„ ê±°ë¦¬ ê³„ì‚° (ë¶€í”¼ì— ë”°ë¼)
            const spacing = Math.sqrt(volume / initialVolume);
            
            // ìƒˆ ì…ì ìƒì„±
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.background = gasColors[gasType];
                particle.style.animationDelay = (Math.random() * 0.5) + 's';
                particle.style.margin = (spacing * 3) + 'px';
                cylinder.appendChild(particle);
            }
        }

        function recordData() {
            const pressure = parseFloat(document.getElementById('pressure').value);
            const volume = constantPV / pressure;
            const pv = pressure * volume;
            
            dataPoints.push({ pressure, volume, pv });
            
            // í…Œì´ë¸” ì—…ë°ì´íŠ¸
            const tbody = document.getElementById('dataTableBody');
            const row = tbody.insertRow();
            row.insertCell(0).textContent = pressure.toFixed(1);
            row.insertCell(1).textContent = volume.toFixed(2);
            row.insertCell(2).textContent = pv.toFixed(2);
            
            // ê·¸ë˜í”„ ì—…ë°ì´íŠ¸
            updateChart();
            
            // í”¼ë“œë°±
            alert('âœ… ë°ì´í„°ê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function updateChart() {
            const canvas = document.getElementById('chart');
            const ctx = canvas.getContext('2d');
            
            // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;
            
            // í´ë¦¬ì–´
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (dataPoints.length === 0) return;
            
            // ì—¬ë°± ì„¤ì •
            const margin = 40;
            const chartWidth = canvas.width - 2 * margin;
            const chartHeight = canvas.height - 2 * margin;
            
            // ì¶• ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#2d3748';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(margin, margin);
            ctx.lineTo(margin, canvas.height - margin);
            ctx.lineTo(canvas.width - margin, canvas.height - margin);
            ctx.stroke();
            
            // ì¶• ë ˆì´ë¸”
            ctx.fillStyle = '#2d3748';
            ctx.font = '14px sans-serif';
            ctx.fillText('ì••ë ¥ (atm)', canvas.width / 2, canvas.height - 10);
            ctx.save();
            ctx.translate(15, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('ë¶€í”¼ (L)', 0, 0);
            ctx.restore();
            
            // ë°ì´í„° ë²”ìœ„ ê³„ì‚°
            const maxP = Math.max(...dataPoints.map(d => d.pressure));
            const maxV = Math.max(...dataPoints.map(d => d.volume));
            
            // ë°ì´í„° í¬ì¸íŠ¸ ê·¸ë¦¬ê¸°
            ctx.fillStyle = '#667eea';
            dataPoints.forEach(point => {
                const x = margin + (point.pressure / maxP) * chartWidth;
                const y = canvas.height - margin - (point.volume / maxV) * chartHeight;
                
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // ì—°ê²°ì„  ê·¸ë¦¬ê¸°
            if (dataPoints.length > 1) {
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                // ì •ë ¬ëœ í¬ì¸íŠ¸ë¡œ ê³¡ì„  ê·¸ë¦¬ê¸°
                const sortedPoints = [...dataPoints].sort((a, b) => a.pressure - b.pressure);
                sortedPoints.forEach((point, i) => {
                    const x = margin + (point.pressure / maxP) * chartWidth;
                    const y = canvas.height - margin - (point.volume / maxV) * chartHeight;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                ctx.stroke();
            }
        }

        function resetSimulation() {
            document.getElementById('pressure').value = 1;
            document.getElementById('initialVolume').value = 2;
            document.getElementById('gasType').value = 'oxygen';
            
            initialVolume = 2;
            constantPV = 2;
            dataPoints = [];
            
            document.getElementById('dataTableBody').innerHTML = '';
            
            // í€´ì¦ˆ ì´ˆê¸°í™”
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            document.getElementById('feedback1').innerHTML = '';
            document.getElementById('feedback2').innerHTML = '';
            
            updateSimulation();
            updateChart();
        }

        function checkAnswer(questionNum, answer) {
            const correctAnswers = {
                1: 'half',
                2: 'pressure'
            };
            
            const feedbackDiv = document.getElementById('feedback' + questionNum);
            const options = document.querySelectorAll('#quiz' + questionNum + ' .quiz-option');
            
            if (answer === correctAnswers[questionNum]) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.innerHTML = 'âœ… ì •ë‹µì…ë‹ˆë‹¤! ' + getFeedbackText(questionNum, true);
                event.target.classList.add('correct');
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.innerHTML = 'âŒ ì•„ì‰½ìŠµë‹ˆë‹¤. ' + getFeedbackText(questionNum, false);
                event.target.classList.add('incorrect');
            }
        }

        function getFeedbackText(questionNum, isCorrect) {
            const feedback = {
                1: {
                    correct: 'ì••ë ¥ê³¼ ë¶€í”¼ëŠ” ë°˜ë¹„ë¡€ ê´€ê³„ì…ë‹ˆë‹¤. ì••ë ¥ì´ 2ë°°ê°€ ë˜ë©´ ë¶€í”¼ëŠ” ì ˆë°˜ì´ ë©ë‹ˆë‹¤.',
                    incorrect: 'ì…ìì˜ ìˆ˜ì™€ í¬ê¸°ëŠ” ì¼ì •í•˜ì§€ë§Œ, ì••ë ¥ì´ ì¦ê°€í•˜ë©´ ì…ì ê°„ ê±°ë¦¬ê°€ ì¤„ì–´ë“¤ì–´ ë¶€í”¼ê°€ ê°ì†Œí•©ë‹ˆë‹¤. (Pâ†‘ â†’ Vâ†“)'
                },
                2: {
                    correct: 'ì‚° ì •ìƒì—ì„œëŠ” ëŒ€ê¸°ì••ì´ ë‚®ì•„ì§‘ë‹ˆë‹¤. ë³‘ ë‚´ë¶€ì˜ ì••ë ¥ì€ ê·¸ëŒ€ë¡œì¸ë° ì™¸ë¶€ ì••ë ¥ì´ ë‚®ì•„ì§€ë©´ ìƒëŒ€ì ìœ¼ë¡œ ë‚´ë¶€ ê¸°ì²´ê°€ íŒ½ì°½í•˜ì—¬ ë³‘ì´ ë¶€í’€ì–´ ì˜¤ë¦…ë‹ˆë‹¤.',
                    incorrect: 'ì˜¨ë„ë‚˜ ì…ì ìˆ˜ì˜ ë³€í™”ê°€ ì•„ë‹ˆë¼, ëŒ€ê¸°ì••ì˜ ê°ì†Œ ë•Œë¬¸ì…ë‹ˆë‹¤. ë†’ì€ ê³³ìœ¼ë¡œ ì˜¬ë¼ê°ˆìˆ˜ë¡ ëŒ€ê¸°ì••ì´ ë‚®ì•„ì ¸ì„œ ë°€íëœ ìš©ê¸° ë‚´ë¶€ì˜ ê¸°ì²´ê°€ íŒ½ì°½í•©ë‹ˆë‹¤.'
                }
            };
            
            return isCorrect ? feedback[questionNum].correct : feedback[questionNum].incorrect;
        }

        function showExample(type) {
            const modal = document.getElementById('exampleModal');
            const content = document.getElementById('modalContent');
            
            const examples = {
                bottle: {
                    title: 'ğŸ”ï¸ ì‚° ì •ìƒì˜ í˜íŠ¸ë³‘',
                    description: 'í‰ì§€ì—ì„œ ë°€íí•œ í˜íŠ¸ë³‘ì„ ì‚° ì •ìƒìœ¼ë¡œ ê°€ì ¸ê°€ë©´ ë¶€í’€ì–´ ì˜¤ë¦…ë‹ˆë‹¤.',
                    explanation: 'ì‚° ì •ìƒì€ í‰ì§€ë³´ë‹¤ ëŒ€ê¸°ì••ì´ ë‚®ìŠµë‹ˆë‹¤. ë³‘ ì•ˆì˜ ê¸°ì²´ëŠ” í‰ì§€ì˜ ì••ë ¥ì„ ìœ ì§€í•˜ê³  ìˆì§€ë§Œ, ì™¸ë¶€ ì••ë ¥ì´ ë‚®ì•„ì§€ë©´ì„œ ìƒëŒ€ì ìœ¼ë¡œ ë†’ì€ ì••ë ¥ì˜ ê¸°ì²´ê°€ íŒ½ì°½í•˜ì—¬ ë³‘ì„ ë¶€í’€ê²Œ ë§Œë“­ë‹ˆë‹¤.',
                    formula: 'P(ë‚®ìŒ) â†’ V(ì¦ê°€)'
                },
                bubble: {
                    title: 'ğŸ¤¿ ì ìˆ˜ë¶€ì˜ ê³µê¸° ë°©ìš¸',
                    description: 'ê¹Šì€ ë°”ë‹·ì†ì—ì„œ ë‚˜ì˜¨ ì‘ì€ ê³µê¸° ë°©ìš¸ì´ ìˆ˜ë©´ìœ¼ë¡œ ì˜¬ë¼ì˜¤ë©´ì„œ ì ì  ì»¤ì§‘ë‹ˆë‹¤.',
                    explanation: 'ìˆ˜ì‹¬ì´ ê¹Šì„ìˆ˜ë¡ ìˆ˜ì••ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. ê¹Šì€ ê³³ì—ì„œëŠ” ë†’ì€ ì••ë ¥ ë•Œë¬¸ì— ë°©ìš¸ì˜ ë¶€í”¼ê°€ ì‘ì§€ë§Œ, ìˆ˜ë©´ìœ¼ë¡œ ì˜¬ë¼ì˜¬ìˆ˜ë¡ ì••ë ¥ì´ ê°ì†Œí•˜ì—¬ ë°©ìš¸ì´ íŒ½ì°½í•©ë‹ˆë‹¤.',
                    formula: 'P(ê°ì†Œ) â†’ V(ì¦ê°€)'
                },
                wrap: {
                    title: 'ğŸ“¦ ë½ë½ì´ (ì—ì–´ìº¡)',
                    description: 'í¬ì¥ìš© ë½ë½ì´ë¥¼ ì†ìœ¼ë¡œ ëˆ„ë¥´ë©´ "íŒ¡!" ì†Œë¦¬ë¥¼ ë‚´ë©° í„°ì§‘ë‹ˆë‹¤.',
                    explanation: 'ì†ìœ¼ë¡œ ëˆ„ë¥´ë©´ ë½ë½ì´ ì•ˆì˜ ê³µê¸°ì— ì••ë ¥ì„ ê°€í•˜ê²Œ ë©ë‹ˆë‹¤. ì••ë ¥ì´ ì¦ê°€í•˜ë©´ ë¶€í”¼ê°€ ì¤„ì–´ë“¤ë ¤ í•˜ì§€ë§Œ í”Œë¼ìŠ¤í‹±ì´ ê²¬ë”œ ìˆ˜ ìˆëŠ” í•œê³„ë¥¼ ë„˜ìœ¼ë©´ í„°ì§€ê²Œ ë©ë‹ˆë‹¤.',
                    formula: 'P(ì¦ê°€) â†’ V(ê°ì†Œ) â†’ í•œê³„ ì´ˆê³¼ì‹œ íŒŒì—´'
                },
                syringe: {
                    title: 'ğŸ’‰ ì£¼ì‚¬ê¸°',
                    description: 'ì£¼ì‚¬ê¸° ëì„ ë§‰ê³  í”¼ìŠ¤í†¤ì„ ëˆ„ë¥´ë©´ ë¶€í”¼ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.',
                    explanation: 'í”¼ìŠ¤í†¤ì„ ëˆ„ë¥´ë©´ ì£¼ì‚¬ê¸° ì•ˆì˜ ê³µê¸°ì— ì••ë ¥ì„ ê°€í•˜ê²Œ ë©ë‹ˆë‹¤. ì••ë ¥ì´ ì¦ê°€í•˜ë©´ ë³´ì¼ì˜ ë²•ì¹™ì— ë”°ë¼ ê¸°ì²´ì˜ ë¶€í”¼ê°€ ê°ì†Œí•˜ê³ , í”¼ìŠ¤í†¤ì„ ë‹¹ê¸°ë©´ ì••ë ¥ì´ ê°ì†Œí•˜ì—¬ ë¶€í”¼ê°€ ì¦ê°€í•©ë‹ˆë‹¤.',
                    formula: 'P(ì¦ê°€) â†’ V(ê°ì†Œ), P(ê°ì†Œ) â†’ V(ì¦ê°€)'
                }
            };
            
            const example = examples[type];
            content.innerHTML = `
                <h2 style="color: #667eea; margin-bottom: 20px;">${example.title}</h2>
                <div style="background: #f7fafc; padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                    <h3 style="color: #2d3748; margin-bottom: 10px;">í˜„ìƒ</h3>
                    <p style="line-height: 1.6;">${example.description}</p>
                </div>
                <div style="background: #e6fffa; padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                    <h3 style="color: #2d3748; margin-bottom: 10px;">ê³¼í•™ì  ì„¤ëª…</h3>
                    <p style="line-height: 1.6;">${example.explanation}</p>
                </div>
                <div style="background: #fef5e7; padding: 15px; border-radius: 10px; text-align: center;">
                    <strong style="color: #c05621; font-size: 1.2em;">${example.formula}</strong>
                </div>
            `;
            
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('exampleModal').style.display = 'none';
        }

        function generateReport() {
            if (dataPoints.length === 0) {
                alert('âš ï¸ ë¨¼ì € ì‹¤í—˜ ë°ì´í„°ë¥¼ ê¸°ë¡í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            let report = '=== ë³´ì¼ì˜ ë²•ì¹™ ì‹¤í—˜ ë³´ê³ ì„œ ===\n\n';
            report += 'ğŸ“… ì‹¤í—˜ ì¼ì‹œ: ' + new Date().toLocaleString('ko-KR') + '\n\n';
            report += 'ğŸ“Š ì‹¤í—˜ ë°ì´í„°:\n';
            report += 'ì••ë ¥(atm) | ë¶€í”¼(L) | PÃ—V\n';
            report += '--------------------------------\n';
            
            dataPoints.forEach(point => {
                report += `${point.pressure.toFixed(1).padEnd(10)} | ${point.volume.toFixed(2).padEnd(8)} | ${point.pv.toFixed(2)}\n`;
            });
            
            const avgPV = dataPoints.reduce((sum, p) => sum + p.pv, 0) / dataPoints.length;
            report += '\nğŸ“ˆ ë¶„ì„:\n';
            report += `- PÃ—Vì˜ í‰ê· ê°’: ${avgPV.toFixed(2)}\n`;
            report += '- ì••ë ¥ê³¼ ë¶€í”¼ëŠ” ë°˜ë¹„ë¡€ ê´€ê³„ë¥¼ ë³´ì„\n';
            report += '- ë³´ì¼ì˜ ë²•ì¹™(PÃ—V=ì¼ì •)ì´ ì„±ë¦½í•¨ì„ í™•ì¸\n\n';
            report += 'ğŸ’¡ ê²°ë¡ :\n';
            report += 'ì˜¨ë„ê°€ ì¼ì •í•  ë•Œ, ê¸°ì²´ì˜ ì••ë ¥ê³¼ ë¶€í”¼ëŠ” ë°˜ë¹„ë¡€í•œë‹¤.\n';
            report += 'ì´ëŠ” ì…ìì˜ ê°œìˆ˜ëŠ” ë³€í•˜ì§€ ì•Šì§€ë§Œ, ì••ë ¥ ì¦ê°€ ì‹œ ì…ì ê°„\n';
            report += 'ê±°ë¦¬ê°€ ì¤„ì–´ë“¤ì–´ ë¶€í”¼ê°€ ê°ì†Œí•˜ê¸° ë•Œë¬¸ì´ë‹¤.\n';
            
            // í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ë³´ì¼ì˜_ë²•ì¹™_ì‹¤í—˜ë³´ê³ ì„œ_' + new Date().toISOString().split('T')[0] + '.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('ğŸ“„ ì‹¤í—˜ ë³´ê³ ì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ì´ˆê¸° ë¶€í”¼ ë³€ê²½ ì‹œ
        document.getElementById('initialVolume').addEventListener('change', function() {
            initialVolume = parseFloat(this.value);
            const pressure = parseFloat(document.getElementById('pressure').value);
            constantPV = pressure * initialVolume;
            updateSimulation();
        });

        // ì••ë ¥ ìŠ¬ë¼ì´ë” ë³€ê²½ ì‹œ
        document.getElementById('pressure').addEventListener('input', updateSimulation);

        // ê¸°ì²´ ì¢…ë¥˜ ë³€ê²½ ì‹œ
        document.getElementById('gasType').addEventListener('change', updateSimulation);

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modal = document.getElementById('exampleModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        };

        // ì´ˆê¸° ì‹¤í–‰
        updateSimulation();
    </script>
</body>
</html>
