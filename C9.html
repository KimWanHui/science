<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì²´ì˜ ì˜¨ë„ì™€ ë¶€í”¼ ê´€ê³„ ì‹œë®¬ë ˆì´ì…˜</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .achievement-standard {
            background: #e8f4f8;
            padding: 15px;
            border-left: 4px solid #3498db;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .achievement-standard strong {
            color: #2980b9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .left-panel, .right-panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .controls {
            margin-bottom: 25px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        .value-display {
            min-width: 120px;
            background: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            border: 2px solid #3498db;
        }

        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 1em;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 12px;
            font-size: 1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-start {
            background: #27ae60;
            color: white;
        }

        .btn-start:hover {
            background: #229954;
            transform: translateY(-2px);
        }

        .btn-reset {
            background: #e74c3c;
            color: white;
        }

        .btn-reset:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .btn-record {
            background: #f39c12;
            color: white;
        }

        .btn-record:hover {
            background: #d68910;
            transform: translateY(-2px);
        }

        #particleCanvas {
            width: 100%;
            height: 400px;
            background: linear-gradient(to bottom, #e8f8f5 0%, #d5f4e6 100%);
            border: 3px solid #2c3e50;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .info-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .info-label {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            height: 350px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }

        .data-table th {
            background: #3498db;
            color: white;
            padding: 12px;
            text-align: center;
        }

        .data-table td {
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .feedback-section {
            background: #fff9e6;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #f39c12;
            margin-top: 20px;
        }

        .feedback-title {
            font-weight: bold;
            color: #d68910;
            margin-bottom: 10px;
        }

        .quiz-section {
            background: #e8f8f5;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .quiz-question {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }

        .quiz-question h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 10px;
            background: #f8f9fa;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background: #e8f4f8;
            border-color: #3498db;
        }

        .quiz-option.selected {
            background: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .formula-box {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            color: #2980b9;
        }

        .real-life-examples {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .example-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .example-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .example-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .real-life-examples {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¬ ê¸°ì²´ì˜ ì˜¨ë„ì™€ ë¶€í”¼ ê´€ê³„ ì‹œë®¬ë ˆì´ì…˜</h1>
        <p class="subtitle">ìƒ¤ë¥¼ì˜ ë²•ì¹™(Charles's Law)ì„ ì…ì ëª¨í˜•ìœ¼ë¡œ ì´í•´í•˜ê¸°</p>

        <div class="achievement-standard">
            <strong>ì„±ì·¨ê¸°ì¤€:</strong> [ì¤‘1 ê³¼í•™ 4-3-01] ê¸°ì²´ì˜ ë¶€í”¼ê°€ ì˜¨ë„ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” í˜„ìƒì„ ê´€ì°°í•˜ê³ , ì…ì ìš´ë™ìœ¼ë¡œ ì„¤ëª…í•œë‹¤.
        </div>

        <div class="formula-box">
            ìƒ¤ë¥¼ì˜ ë²•ì¹™: V âˆ T &nbsp;&nbsp;|&nbsp;&nbsp; Vâ‚/Tâ‚ = Vâ‚‚/Tâ‚‚ &nbsp;&nbsp;|&nbsp;&nbsp; ì ˆëŒ€ì˜¨ë„(K) = ì„­ì”¨ì˜¨ë„(â„ƒ) + 273
        </div>

        <div class="main-content">
            <div class="left-panel">
                <h2 class="section-title">âš™ï¸ ì‹¤í—˜ ì¡°ì‘</h2>
                
                <div class="controls">
                    <div class="control-group">
                        <label>ì˜¨ë„ (â„ƒ)</label>
                        <div class="slider-container">
                            <input type="range" id="tempSlider" min="-50" max="200" value="20" step="1">
                            <div class="value-display" id="tempDisplay">20 â„ƒ (293 K)</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label>ì´ˆê¸° ë¶€í”¼ (mL)</label>
                        <input type="number" id="initialVolume" value="100" min="50" max="200" step="10">
                    </div>

                    <div class="control-group">
                        <label>ì••ë ¥ (ê³ ì •)</label>
                        <input type="text" value="1 atm (ì¼ì •)" disabled style="background: #ecf0f1; color: #7f8c8d;">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-start" onclick="startSimulation()">â–¶ï¸ ì‹œì‘</button>
                    <button class="btn-record" onclick="recordData()">ğŸ“Š ë°ì´í„° ê¸°ë¡</button>
                    <button class="btn-reset" onclick="resetSimulation()">ğŸ”„ ì´ˆê¸°í™”</button>
                </div>

                <div class="info-display">
                    <div class="info-box">
                        <div class="info-label">í˜„ì¬ ì˜¨ë„</div>
                        <div class="info-value" id="currentTemp">20 â„ƒ</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">í˜„ì¬ ë¶€í”¼</div>
                        <div class="info-value" id="currentVolume">100 mL</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">ì ˆëŒ€ì˜¨ë„</div>
                        <div class="info-value" id="absoluteTemp">293 K</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">ì…ì ì†ë„</div>
                        <div class="info-value" id="particleSpeed">ë³´í†µ</div>
                    </div>
                </div>

                <h2 class="section-title">ğŸ“‹ ì‹¤í—˜ ë°ì´í„°</h2>
                <table class="data-table" id="dataTable">
                    <thead>
                        <tr>
                            <th>ìˆœë²ˆ</th>
                            <th>ì˜¨ë„ (â„ƒ)</th>
                            <th>ì˜¨ë„ (K)</th>
                            <th>ë¶€í”¼ (mL)</th>
                            <th>V/T</th>
                        </tr>
                    </thead>
                    <tbody id="dataBody">
                    </tbody>
                </table>
            </div>

            <div class="right-panel">
                <h2 class="section-title">ğŸ¯ ì…ì ëª¨í˜• ì‹œê°í™”</h2>
                <canvas id="particleCanvas"></canvas>

                <div class="feedback-section">
                    <div class="feedback-title">ğŸ’¡ ê´€ì°° í¬ì¸íŠ¸</div>
                    <div id="feedbackText">
                        ì˜¨ë„ë¥¼ ì¡°ì ˆí•˜ì—¬ ê¸°ì²´ ì…ìì˜ ìš´ë™ê³¼ ë¶€í”¼ ë³€í™”ë¥¼ ê´€ì°°í•´ë³´ì„¸ìš”.
                        ì˜¨ë„ê°€ ì˜¬ë¼ê°€ë©´ ì…ìê°€ ë” ë¹ ë¥´ê²Œ ì›€ì§ì´ê³ , ìš©ê¸° ë²½ì— ë” ìì£¼ ì¶©ëŒí•©ë‹ˆë‹¤.
                    </div>
                </div>

                <h2 class="section-title" style="margin-top: 20px;">ğŸ“ˆ ì‹¤ì‹œê°„ ê·¸ë˜í”„</h2>
                <div class="chart-container">
                    <canvas id="volumeChart"></canvas>
                </div>
            </div>
        </div>

        <div class="quiz-section">
            <h2 class="section-title">ğŸ“ ê°œë… í™•ì¸ í€´ì¦ˆ</h2>
            
            <div class="quiz-question">
                <h3>1. ì˜¨ë„ê°€ ì˜¬ë¼ê°ˆ ë•Œ ê¸°ì²´ì˜ ë¶€í”¼ëŠ” ì–´ë–»ê²Œ ë³€í•˜ë‚˜ìš”?</h3>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkAnswer(this, 1, true)">ì¦ê°€í•œë‹¤ (ì…ì ìš´ë™ ì—ë„ˆì§€ ì¦ê°€ë¡œ ë” ë„“ì€ ê³µê°„ ì°¨ì§€)</div>
                    <div class="quiz-option" onclick="checkAnswer(this, 1, false)">ê°ì†Œí•œë‹¤</div>
                    <div class="quiz-option" onclick="checkAnswer(this, 1, false)">ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤</div>
                </div>
            </div>

            <div class="quiz-question">
                <h3>2. ìƒ¤ë¥¼ì˜ ë²•ì¹™ì—ì„œ ë¶€í”¼ëŠ” ë¬´ì—‡ì— ì •ë¹„ë¡€í•˜ë‚˜ìš”?</h3>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkAnswer(this, 2, false)">ì„­ì”¨ ì˜¨ë„ (â„ƒ)</div>
                    <div class="quiz-option" onclick="checkAnswer(this, 2, true)">ì ˆëŒ€ ì˜¨ë„ (K)</div>
                    <div class="quiz-option" onclick="checkAnswer(this, 2, false)">ì••ë ¥</div>
                </div>
            </div>

            <div class="quiz-question">
                <h3>3. ì˜¨ë„ê°€ 273Kì—ì„œ 546Kë¡œ ë‘ ë°°ê°€ ë˜ë©´ ë¶€í”¼ëŠ”?</h3>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkAnswer(this, 3, false)">ì ˆë°˜ì´ ëœë‹¤</div>
                    <div class="quiz-option" onclick="checkAnswer(this, 3, true)">ë‘ ë°°ê°€ ëœë‹¤ (V âˆ T ê´€ê³„)</div>
                    <div class="quiz-option" onclick="checkAnswer(this, 3, false)">ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤</div>
                </div>
            </div>
        </div>

        <h2 class="section-title" style="margin-top: 30px;">ğŸŒ ì‹¤ìƒí™œ ì ìš© ì‚¬ë¡€</h2>
        <div class="real-life-examples">
            <div class="example-card">
                <div class="example-icon">ğŸ“</div>
                <h4>íƒêµ¬ê³µ ë¶€í’€ë¦¬ê¸°</h4>
                <p>ì°Œê·¸ëŸ¬ì§„ íƒêµ¬ê³µì„ ëœ¨ê±°ìš´ ë¬¼ì— ë„£ìœ¼ë©´ ë‚´ë¶€ ê³µê¸°ê°€ íŒ½ì°½í•˜ì—¬ ë‹¤ì‹œ ë‘¥ê¸€ê²Œ ë©ë‹ˆë‹¤.</p>
            </div>
            <div class="example-card">
                <div class="example-icon">ğŸš—</div>
                <h4>ì—¬ë¦„ì²  íƒ€ì´ì–´</h4>
                <p>ì—¬ë¦„ì²  ë†’ì€ ì˜¨ë„ì—ì„œ íƒ€ì´ì–´ ë‚´ë¶€ ê³µê¸°ê°€ íŒ½ì°½í•˜ì—¬ ì••ë ¥ì´ ì¦ê°€í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="example-card">
                <div class="example-icon">ğŸˆ</div>
                <h4>ì—´ê¸°êµ¬ì˜ ì›ë¦¬</h4>
                <p>ê³µê¸°ë¥¼ ê°€ì—´í•˜ë©´ ë¶€í”¼ê°€ ì¦ê°€í•˜ê³  ë°€ë„ê°€ ì‘ì•„ì ¸ ì—´ê¸°êµ¬ê°€ ìƒìŠ¹í•©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let canvas, ctx;
        let particles = [];
        let temperature = 20; // ì„­ì”¨
        let initialVolume = 100;
        let currentVolume = 100;
        let animationId;
        let chart;
        let dataPoints = [];
        let recordCount = 0;

        // ì´ˆê¸°í™”
        window.onload = function() {
            canvas = document.getElementById('particleCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            initializeParticles();
            setupChart();
            updateDisplay();
            animate();
        };

        // ì…ì ì´ˆê¸°í™”
        function initializeParticles() {
            particles = [];
            const numParticles = 50;
            
            for (let i = 0; i < numParticles; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    radius: 6
                });
            }
        }

        // ì°¨íŠ¸ ì„¤ì •
        function setupChart() {
            const chartCanvas = document.getElementById('volumeChart');
            chart = new Chart(chartCanvas, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'ë¶€í”¼ (mL)',
                        data: [],
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.1,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            title: {
                                display: true,
                                text: 'ì ˆëŒ€ì˜¨ë„ (K)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 200,
                            max: 500
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'ë¶€í”¼ (mL)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 0,
                            max: 200
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `ì˜¨ë„: ${context.parsed.x}K, ë¶€í”¼: ${context.parsed.y}mL`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // ì˜¨ë„ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
        document.getElementById('tempSlider').addEventListener('input', function(e) {
            temperature = parseInt(e.target.value);
            updateDisplay();
            updateParticleSpeed();
        });

        // ì´ˆê¸° ë¶€í”¼ ë³€ê²½ ì´ë²¤íŠ¸
        document.getElementById('initialVolume').addEventListener('input', function(e) {
            initialVolume = parseInt(e.target.value);
            calculateVolume();
            updateDisplay();
        });

        // ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
        function startSimulation() {
            calculateVolume();
            updateDisplay();
            updateParticleSpeed();
            updateFeedback();
        }

        // ë¶€í”¼ ê³„ì‚° (ìƒ¤ë¥¼ì˜ ë²•ì¹™)
        function calculateVolume() {
            const T1 = 293; // 20â„ƒ = 293K (ê¸°ì¤€)
            const T2 = temperature + 273; // í˜„ì¬ ì˜¨ë„ë¥¼ ì ˆëŒ€ì˜¨ë„ë¡œ ë³€í™˜
            currentVolume = Math.round((initialVolume * T2) / T1);
        }

        // ì…ì ì†ë„ ì—…ë°ì´íŠ¸
        function updateParticleSpeed() {
            const speedFactor = (temperature + 273) / 293;
            
            particles.forEach(particle => {
                const currentSpeed = Math.sqrt(particle.vx ** 2 + particle.vy ** 2);
                const targetSpeed = speedFactor * 2;
                const ratio = targetSpeed / (currentSpeed || 1);
                
                particle.vx *= ratio;
                particle.vy *= ratio;
            });
        }

        // í™”ë©´ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateDisplay() {
            const absoluteTemp = temperature + 273;
            
            document.getElementById('tempDisplay').textContent = `${temperature} â„ƒ (${absoluteTemp} K)`;
            document.getElementById('currentTemp').textContent = `${temperature} â„ƒ`;
            document.getElementById('absoluteTemp').textContent = `${absoluteTemp} K`;
            document.getElementById('currentVolume').textContent = `${currentVolume} mL`;
            
            // ì…ì ì†ë„ í‘œì‹œ
            let speedText = 'ëŠë¦¼';
            if (temperature > 50) speedText = 'ë¹ ë¦„';
            else if (temperature > 0) speedText = 'ë³´í†µ';
            document.getElementById('particleSpeed').textContent = speedText;
        }

        // í”¼ë“œë°± ì—…ë°ì´íŠ¸
        function updateFeedback() {
            let feedback = '';
            
            if (temperature < 0) {
                feedback = 'â„ï¸ ì˜¨ë„ê°€ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. ì…ìë“¤ì´ ì²œì²œíˆ ì›€ì§ì´ë©° ë¶€í”¼ê°€ ê°ì†Œí•©ë‹ˆë‹¤. ì ˆëŒ€ì˜¨ë„ì— ê°€ê¹Œì›Œì§ˆìˆ˜ë¡ ì…ì ìš´ë™ì´ ê±°ì˜ ë©ˆì¶¥ë‹ˆë‹¤.';
            } else if (temperature < 50) {
                feedback = 'ğŸŒ¡ï¸ ìƒì˜¨ ë²”ìœ„ì…ë‹ˆë‹¤. ì…ìë“¤ì´ ì ë‹¹í•œ ì†ë„ë¡œ ì›€ì§ì´ê³  ìˆìŠµë‹ˆë‹¤. ì˜¨ë„ë¥¼ ë†’ì—¬ë³´ë©´ì„œ ë¶€í”¼ ë³€í™”ë¥¼ ê´€ì°°í•´ë³´ì„¸ìš”.';
            } else if (temperature < 100) {
                feedback = 'ğŸ”¥ ì˜¨ë„ê°€ ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤. ì…ìë“¤ì´ ë¹ ë¥´ê²Œ ì›€ì§ì´ë©° ìš©ê¸° ë²½ì— ë” ìì£¼ ì¶©ëŒí•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë¶€í”¼ê°€ ì¦ê°€í•©ë‹ˆë‹¤.';
            } else {
                feedback = 'ğŸŒ‹ ì˜¨ë„ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ì…ìë“¤ì˜ ìš´ë™ ì—ë„ˆì§€ê°€ í¬ê²Œ ì¦ê°€í•˜ì—¬ ë¶€í”¼ê°€ í¬ê²Œ íŒ½ì°½í•©ë‹ˆë‹¤. ì‹¤ì œë¡œëŠ” ê¸°ì²´ê°€ ìš©ê¸°ë¥¼ ë²—ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            }
            
            document.getElementById('feedbackText').textContent = feedback;
        }

        // ë°ì´í„° ê¸°ë¡
        function recordData() {
            recordCount++;
            const absoluteTemp = temperature + 273;
            const ratio = (currentVolume / absoluteTemp).toFixed(3);
            
            // í…Œì´ë¸”ì— ì¶”ê°€
            const tbody = document.getElementById('dataBody');
            const row = tbody.insertRow(0);
            row.innerHTML = `
                <td>${recordCount}</td>
                <td>${temperature}</td>
                <td>${absoluteTemp}</td>
                <td>${currentVolume}</td>
                <td>${ratio}</td>
            `;
            
            // ê·¸ë˜í”„ì— ì¶”ê°€
            chart.data.datasets[0].data.push({
                x: absoluteTemp,
                y: currentVolume
            });
            chart.update();
            
            // ìµœê·¼ 5ê°œ ë°ì´í„°ì˜ í‰ê·  ë¹„ìœ¨ ê³„ì‚°
            const recentData = Array.from(tbody.rows).slice(0, 5);
            if (recentData.length >= 3) {
                const ratios = recentData.map(row => parseFloat(row.cells[4].textContent));
                const avgRatio = ratios.reduce((a, b) => a + b) / ratios.length;
                const variance = ratios.reduce((sum, val) => sum + Math.pow(val - avgRatio, 2), 0) / ratios.length;
                
                if (variance < 0.001) {
                    showAchievement('ğŸ‰ ìƒ¤ë¥¼ì˜ ë²•ì¹™ í™•ì¸! V/T ë¹„ìœ¨ì´ ì¼ì •í•©ë‹ˆë‹¤!');
                }
            }
        }

        // ì„±ì·¨ ì•Œë¦¼
        function showAchievement(message) {
            const feedback = document.getElementById('feedbackText');
            const originalText = feedback.textContent;
            feedback.textContent = message;
            feedback.style.fontWeight = 'bold';
            feedback.style.color = '#27ae60';
            
            setTimeout(() => {
                feedback.textContent = originalText;
                feedback.style.fontWeight = 'normal';
                feedback.style.color = 'inherit';
            }, 3000);
        }

        // ì´ˆê¸°í™”
        function resetSimulation() {
            temperature = 20;
            initialVolume = 100;
            currentVolume = 100;
            recordCount = 0;
            
            document.getElementById('tempSlider').value = 20;
            document.getElementById('initialVolume').value = 100;
            document.getElementById('dataBody').innerHTML = '';
            
            chart.data.datasets[0].data = [];
            chart.update();
            
            initializeParticles();
            updateDisplay();
            updateFeedback();
        }

        // ì…ì ì• ë‹ˆë©”ì´ì…˜
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ìš©ê¸° í¬ê¸° ê³„ì‚° (ë¶€í”¼ì— ë¹„ë¡€)
            const containerScale = Math.sqrt(currentVolume / initialVolume);
            const containerWidth = canvas.width * 0.9 * containerScale;
            const containerHeight = canvas.height * 0.9 * containerScale;
            const containerX = (canvas.width - containerWidth) / 2;
            const containerY = (canvas.height - containerHeight) / 2;
            
            // ìš©ê¸° ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 4;
            ctx.strokeRect(containerX, containerY, containerWidth, containerHeight);
            
            // ì…ì ì—…ë°ì´íŠ¸ ë° ê·¸ë¦¬ê¸°
            particles.forEach(particle => {
                // ê²½ê³„ ì¶©ëŒ
                if (particle.x < containerX || particle.x > containerX + containerWidth) {
                    particle.vx *= -1;
                    particle.x = Math.max(containerX, Math.min(particle.x, containerX + containerWidth));
                }
                if (particle.y < containerY || particle.y > containerY + containerHeight) {
                    particle.vy *= -1;
                    particle.y = Math.max(containerY, Math.min(particle.y, containerY + containerHeight));
                }
                
                // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
                particle.x += particle.vx;
                particle.y += particle.vy;
                
                // ì…ì ê·¸ë¦¬ê¸°
                const speed = Math.sqrt(particle.vx ** 2 + particle.vy ** 2);
                const hue = Math.min(240 - speed * 20, 240);
                ctx.fillStyle = `hsl(${hue}, 70%, 50%)`;
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                ctx.fill();
                
                // ìš´ë™ ë°©í–¥ í‘œì‹œ
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(particle.x, particle.y);
                ctx.lineTo(particle.x + particle.vx * 3, particle.y + particle.vy * 3);
                ctx.stroke();
            });
            
            animationId = requestAnimationFrame(animate);
        }

        // í€´ì¦ˆ ì •ë‹µ ì²´í¬
        function checkAnswer(element, questionNum, isCorrect) {
            const options = element.parentElement.children;
            
            // ì´ë¯¸ ë‹µë³€í•œ ê²½ìš° ë¬´ì‹œ
            if (element.classList.contains('correct') || element.classList.contains('incorrect')) {
                return;
            }
            
            // ëª¨ë“  ì˜µì…˜ì— ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ
            Array.from(options).forEach(option => {
                option.style.pointerEvents = 'none';
                if (option === element) {
                    option.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            });
            
            // ì •ë‹µì¸ ê²½ìš° í”¼ë“œë°±
            if (isCorrect) {
                setTimeout(() => {
                    alert('âœ… ì •ë‹µì…ë‹ˆë‹¤! ìƒ¤ë¥¼ì˜ ë²•ì¹™ì„ ì˜ ì´í•´í•˜ê³  ìˆìŠµë‹ˆë‹¤.');
                }, 100);
            } else {
                setTimeout(() => {
                    alert('âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ì‹œë®¬ë ˆì´ì…˜ì„ í†µí•´ ì˜¨ë„ì™€ ë¶€í”¼ì˜ ê´€ê³„ë¥¼ ê´€ì°°í•´ë³´ì„¸ìš”.');
                }, 100);
            }
        }
    </script>
</body>
</html>
