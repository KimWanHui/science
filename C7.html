<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë³´ì¼ ë²•ì¹™ ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        h1 {
            color: #667eea;
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .curriculum-info {
            background: #f0f4ff;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .curriculum-info strong {
            color: #667eea;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .control-panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1em;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            transition: all 0.3s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            background: #764ba2;
            transform: scale(1.2);
        }

        .value-display {
            min-width: 100px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            background: white;
            padding: 8px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .visualization-area {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #667eea;
        }

        .syringe-container {
            text-align: center;
            margin-bottom: 20px;
        }

        #syringeCanvas {
            border: 2px solid #333;
            border-radius: 10px;
            background: #fafafa;
            max-width: 100%;
        }

        .data-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .data-table-container, .graph-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f0f4ff;
        }

        tr:hover {
            background: #e6ecff;
        }

        #graphCanvas {
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            max-width: 100%;
        }

        .feedback-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 5px solid #f39c12;
        }

        .feedback-box h3 {
            color: #d35400;
            margin-bottom: 10px;
        }

        .feedback-box p {
            line-height: 1.8;
            color: #333;
        }

        .quiz-section {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 5px solid #4caf50;
        }

        .quiz-section h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }

        .quiz-question {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }

        .quiz-question p {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .quiz-options label {
            display: block;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-options label:hover {
            background: #c8e6c9;
        }

        .quiz-options input[type="radio"] {
            margin-right: 10px;
        }

        .particle-info {
            background: #fff3e0;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #ff9800;
        }

        .particle-info strong {
            color: #e65100;
        }

        .law-formula {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            border: 2px dashed #2196f3;
        }

        .law-formula h3 {
            color: #1565c0;
            margin-bottom: 10px;
        }

        .formula {
            font-size: 1.8em;
            font-weight: bold;
            color: #0d47a1;
            margin: 15px 0;
        }

        @media (max-width: 1024px) {
            .main-content, .data-section {
                grid-template-columns: 1fr;
            }
        }

        .highlight {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”¬ ë³´ì¼ ë²•ì¹™ ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´ì…˜</h1>
            <div class="curriculum-info">
                <strong>ğŸ“š êµìœ¡ê³¼ì •:</strong> ì¤‘í•™êµ 1í•™ë…„ ê³¼í•™ - ê¸°ì²´ì˜ ì„±ì§ˆê³¼ ìƒíƒœ ë³€í™”<br>
                <strong>ğŸ¯ ì„±ì·¨ê¸°ì¤€:</strong> [9ê³¼04-02] ì••ë ¥ì— ë”°ë¼ ê¸°ì²´ì˜ ë¶€í”¼ê°€ ë³€í•˜ëŠ” í˜„ìƒì„ ê´€ì°°í•˜ê³ , ì…ì ëª¨í˜•ìœ¼ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.<br>
                <strong>ğŸ’¡ í•™ìŠµëª©í‘œ:</strong> ì••ë ¥ ë³€í™”ì— ë”°ë¥¸ ê¸°ì²´ ë¶€í”¼ ë³€í™”ë¥¼ ê´€ì°°í•˜ê³  ì…ì ëª¨í˜•ìœ¼ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.
            </div>
        </header>

        <div class="law-formula">
            <h3>ë³´ì¼ ë²•ì¹™ (Boyle's Law)</h3>
            <div class="formula">P Ã— V = ì¼ì • (ì¼ì • ì˜¨ë„ì—ì„œ)</div>
            <p>ì¼ì •í•œ ì˜¨ë„ì—ì„œ ê¸°ì²´ì˜ ì••ë ¥ê³¼ ë¶€í”¼ì˜ ê³±ì€ í•­ìƒ ì¼ì •í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="main-content">
            <div class="control-panel">
                <h2 style="color: #667eea; margin-bottom: 20px;">âš™ï¸ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h2>
                
                <div class="control-group">
                    <label>ğŸ”½ ì™¸ë¶€ ì••ë ¥ (atm)</label>
                    <div class="slider-container">
                        <input type="range" id="pressureSlider" min="0.5" max="4" step="0.1" value="1">
                        <div class="value-display" id="pressureValue">1.0 atm</div>
                    </div>
                </div>

                <div class="control-group">
                    <label>ğŸ“ ì´ˆê¸° ë¶€í”¼ (L)</label>
                    <div class="slider-container">
                        <input type="range" id="volumeSlider" min="1" max="10" step="0.5" value="5">
                        <div class="value-display" id="initialVolumeValue">5.0 L</div>
                    </div>
                </div>

                <div class="particle-info">
                    <strong>ğŸŒ¡ï¸ ì˜¨ë„:</strong> 25Â°C (ì¼ì •)<br>
                    <strong>âš›ï¸ ì…ì ìˆ˜:</strong> 100ê°œ (ì¼ì •)<br>
                    <strong>ğŸ“Š í˜„ì¬ PV ê°’:</strong> <span id="pvValue">5.0</span>
                </div>

                <div class="button-group">
                    <button class="btn-primary" onclick="startSimulation()">â–¶ï¸ ì‹¤í—˜ ì‹œì‘</button>
                    <button class="btn-secondary" onclick="resetSimulation()">ğŸ”„ ì´ˆê¸°í™”</button>
                </div>

                <div class="button-group">
                    <button class="btn-primary" onclick="addDataPoint()">ğŸ“ ë°ì´í„° ê¸°ë¡</button>
                    <button class="btn-primary" onclick="exportReport()">ğŸ“„ ê²°ê³¼ ì €ì¥</button>
                </div>
            </div>

            <div class="visualization-area">
                <h2 style="color: #667eea; margin-bottom: 15px;">ğŸ‘ï¸ ì…ì ëª¨í˜• ì‹œê°í™”</h2>
                <div class="syringe-container">
                    <canvas id="syringeCanvas" width="500" height="400"></canvas>
                </div>
                <div style="text-align: center; color: #666; margin-top: 10px;">
                    <strong>í˜„ì¬ ë¶€í”¼:</strong> <span id="currentVolume" style="color: #667eea; font-size: 1.3em;">5.0 L</span>
                </div>
            </div>
        </div>

        <div class="data-section">
            <div class="data-table-container">
                <h3 style="color: #667eea;">ğŸ“Š ì‹¤í—˜ ë°ì´í„° í…Œì´ë¸”</h3>
                <table id="dataTable">
                    <thead>
                        <tr>
                            <th>ì••ë ¥ (atm)</th>
                            <th>ë¶€í”¼ (L)</th>
                            <th>P Ã— V</th>
                            <th>ì¶©ëŒ ë¹ˆë„</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>

            <div class="graph-container">
                <h3 style="color: #667eea;">ğŸ“ˆ ì••ë ¥-ë¶€í”¼ ê´€ê³„ ê·¸ë˜í”„</h3>
                <canvas id="graphCanvas" width="450" height="350"></canvas>
            </div>
        </div>

        <div class="feedback-box" id="feedbackBox">
            <h3>ğŸ’¬ í•™ìŠµ í”¼ë“œë°±</h3>
            <p id="feedbackText">ì••ë ¥ ìŠ¬ë¼ì´ë”ë¥¼ ì¡°ì‘í•˜ì—¬ ê¸°ì²´ì˜ ë¶€í”¼ ë³€í™”ë¥¼ ê´€ì°°í•´ë³´ì„¸ìš”!</p>
        </div>

        <div class="quiz-section">
            <h3>ğŸ¤” ê°œë… í™•ì¸ ë¬¸ì œ</h3>
            
            <div class="quiz-question">
                <p>Q1. ì••ë ¥ì„ 2ë°°ë¡œ ì¦ê°€ì‹œí‚¤ë©´ ë¶€í”¼ëŠ” ì–´ë–»ê²Œ ë³€í• ê¹Œìš”?</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q1" value="a"> 2ë°°ë¡œ ì¦ê°€í•œë‹¤</label>
                    <label><input type="radio" name="q1" value="b"> 2ë°°ë¡œ ê°ì†Œí•œë‹¤</label>
                    <label><input type="radio" name="q1" value="c"> 1/2ë¡œ ê°ì†Œí•œë‹¤</label>
                    <label><input type="radio" name="q1" value="d"> ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤</label>
                </div>
            </div>

            <div class="quiz-question">
                <p>Q2. ì••ë ¥ì„ ë†’ì˜€ì„ ë•Œ ë¶€í”¼ê°€ ê°ì†Œí•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q2" value="a"> ì…ìì˜ ê°œìˆ˜ê°€ ê°ì†Œí•˜ê¸° ë•Œë¬¸</label>
                    <label><input type="radio" name="q2" value="b"> ì…ìì˜ í¬ê¸°ê°€ ì‘ì•„ì§€ê¸° ë•Œë¬¸</label>
                    <label><input type="radio" name="q2" value="c"> ì…ì ì‚¬ì´ì˜ ê±°ë¦¬ê°€ ì¢ì•„ì§€ê¸° ë•Œë¬¸</label>
                    <label><input type="radio" name="q2" value="d"> ì…ìì˜ ìš´ë™ ì†ë„ê°€ ëŠë ¤ì§€ê¸° ë•Œë¬¸</label>
                </div>
            </div>

            <div class="quiz-question">
                <p>Q3. ì¼ì •í•œ ì˜¨ë„ì—ì„œ ì••ë ¥ì´ 1.5 atmì¼ ë•Œ ë¶€í”¼ê°€ 4 Lë¼ë©´, ì••ë ¥ì´ 3 atmì¼ ë•Œ ë¶€í”¼ëŠ”?</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q3" value="a"> 1 L</label>
                    <label><input type="radio" name="q3" value="b"> 2 L</label>
                    <label><input type="radio" name="q3" value="c"> 6 L</label>
                    <label><input type="radio" name="q3" value="d"> 8 L</label>
                </div>
            </div>

            <button class="btn-primary" onclick="checkAnswers()" style="margin-top: 15px;">âœ… ì •ë‹µ í™•ì¸</button>
            <div id="quizResult" style="margin-top: 15px; font-weight: 600;"></div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let initialVolume = 5;
        let initialPV = 5;
        let pressure = 1;
        let volume = 5;
        let particles = [];
        let dataPoints = [];
        let animationId;

        // Canvas ì„¤ì •
        const syringeCanvas = document.getElementById('syringeCanvas');
        const syringeCtx = syringeCanvas.getContext('2d');
        const graphCanvas = document.getElementById('graphCanvas');
        const graphCtx = graphCanvas.getContext('2d');

        // ì…ì í´ë˜ìŠ¤
        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.radius = 4;
            }

            update(maxX) {
                this.x += this.vx;
                this.y += this.vy;

                // ë²½ê³¼ì˜ ì¶©ëŒ
                if (this.x - this.radius < 50 || this.x + this.radius > maxX) {
                    this.vx = -this.vx;
                }
                if (this.y - this.radius < 50 || this.y + this.radius > 350) {
                    this.vy = -this.vy;
                }
            }

            draw(ctx) {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = '#667eea';
                ctx.fill();
                ctx.strokeStyle = '#4c5fd5';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
        }

        // ì´ˆê¸°í™”
        function initParticles() {
            particles = [];
            const maxX = 50 + (volume / 10) * 400;
            for (let i = 0; i < 100; i++) {
                const x = 50 + Math.random() * (maxX - 50 - 10);
                const y = 50 + Math.random() * 300;
                particles.push(new Particle(x, y));
            }
        }

        // ì£¼ì‚¬ê¸° ê·¸ë¦¬ê¸°
        function drawSyringe() {
            syringeCtx.clearRect(0, 0, syringeCanvas.width, syringeCanvas.height);
            
            const syringeWidth = (volume / 10) * 400;
            const maxX = 50 + syringeWidth;

            // ì£¼ì‚¬ê¸° ëª¸í†µ
            syringeCtx.strokeStyle = '#333';
            syringeCtx.lineWidth = 4;
            syringeCtx.strokeRect(50, 50, syringeWidth, 300);

            // í”¼ìŠ¤í†¤
            syringeCtx.fillStyle = '#999';
            syringeCtx.fillRect(maxX, 50, 10, 300);

            // ì••ë ¥ í‘œì‹œ
            syringeCtx.fillStyle = '#e74c3c';
            syringeCtx.font = 'bold 16px Arial';
            syringeCtx.fillText(`ì••ë ¥: ${pressure.toFixed(1)} atm`, maxX + 20, 200);

            // í™”ì‚´í‘œ (ì••ë ¥ ë°©í–¥)
            const arrowLength = pressure * 20;
            syringeCtx.strokeStyle = '#e74c3c';
            syringeCtx.lineWidth = 3;
            syringeCtx.beginPath();
            syringeCtx.moveTo(maxX + 15 + arrowLength, 200);
            syringeCtx.lineTo(maxX + 15, 200);
            syringeCtx.stroke();
            
            // í™”ì‚´í‘œ ë¨¸ë¦¬
            syringeCtx.beginPath();
            syringeCtx.moveTo(maxX + 15, 200);
            syringeCtx.lineTo(maxX + 25, 195);
            syringeCtx.lineTo(maxX + 25, 205);
            syringeCtx.closePath();
            syringeCtx.fillStyle = '#e74c3c';
            syringeCtx.fill();

            // ì…ì ê·¸ë¦¬ê¸°
            particles.forEach(particle => {
                particle.update(maxX);
                particle.draw(syringeCtx);
            });
        }

        // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
        function drawGraph() {
            graphCtx.clearRect(0, 0, graphCanvas.width, graphCanvas.height);

            const padding = 50;
            const width = graphCanvas.width - padding * 2;
            const height = graphCanvas.height - padding * 2;

            // ì¶• ê·¸ë¦¬ê¸°
            graphCtx.strokeStyle = '#333';
            graphCtx.lineWidth = 2;
            graphCtx.beginPath();
            graphCtx.moveTo(padding, padding);
            graphCtx.lineTo(padding, padding + height);
            graphCtx.lineTo(padding + width, padding + height);
            graphCtx.stroke();

            // ì¶• ë ˆì´ë¸”
            graphCtx.fillStyle = '#333';
            graphCtx.font = 'bold 14px Arial';
            graphCtx.fillText('ë¶€í”¼ (L)', graphCanvas.width / 2 - 30, graphCanvas.height - 10);
            graphCtx.save();
            graphCtx.translate(15, graphCanvas.height / 2);
            graphCtx.rotate(-Math.PI / 2);
            graphCtx.fillText('ì••ë ¥ (atm)', -40, 0);
            graphCtx.restore();

            // ë³´ì¼ ë²•ì¹™ ê³¡ì„ 
            graphCtx.strokeStyle = '#667eea';
            graphCtx.lineWidth = 2;
            graphCtx.beginPath();
            for (let v = 1; v <= 10; v += 0.1) {
                const p = initialPV / v;
                if (p <= 4) {
                    const x = padding + (v / 10) * width;
                    const y = padding + height - (p / 4) * height;
                    if (v === 1) {
                        graphCtx.moveTo(x, y);
                    } else {
                        graphCtx.lineTo(x, y);
                    }
                }
            }
            graphCtx.stroke();

            // í˜„ì¬ ì 
            const currentX = padding + (volume / 10) * width;
            const currentY = padding + height - (pressure / 4) * height;
            graphCtx.fillStyle = '#e74c3c';
            graphCtx.beginPath();
            graphCtx.arc(currentX, currentY, 8, 0, Math.PI * 2);
            graphCtx.fill();

            // ë°ì´í„° í¬ì¸íŠ¸
            dataPoints.forEach(point => {
                const x = padding + (point.volume / 10) * width;
                const y = padding + height - (point.pressure / 4) * height;
                graphCtx.fillStyle = '#27ae60';
                graphCtx.beginPath();
                graphCtx.arc(x, y, 5, 0, Math.PI * 2);
                graphCtx.fill();
            });

            // ê²©ìì„ 
            graphCtx.strokeStyle = '#ddd';
            graphCtx.lineWidth = 1;
            for (let i = 0; i <= 4; i++) {
                const y = padding + (i / 4) * height;
                graphCtx.beginPath();
                graphCtx.moveTo(padding, y);
                graphCtx.lineTo(padding + width, y);
                graphCtx.stroke();
                graphCtx.fillStyle = '#666';
                graphCtx.fillText((4 - i).toFixed(1), 20, y + 5);
            }
            for (let i = 0; i <= 10; i += 2) {
                const x = padding + (i / 10) * width;
                graphCtx.beginPath();
                graphCtx.moveTo(x, padding);
                graphCtx.lineTo(x, padding + height);
                graphCtx.stroke();
                graphCtx.fillStyle = '#666';
                graphCtx.fillText(i.toString(), x - 5, padding + height + 20);
            }
        }

        // ì• ë‹ˆë©”ì´ì…˜
        function animate() {
            drawSyringe();
            drawGraph();
            animationId = requestAnimationFrame(animate);
        }

        // ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
        function startSimulation() {
            cancelAnimationFrame(animationId);
            updateSimulation();
            animate();
            updateFeedback();
        }

        // ì‹œë®¬ë ˆì´ì…˜ ì—…ë°ì´íŠ¸
        function updateSimulation() {
            pressure = parseFloat(document.getElementById('pressureSlider').value);
            volume = initialPV / pressure;
            
            if (volume > 10) volume = 10;
            if (volume < 1) volume = 1;

            document.getElementById('pressureValue').textContent = pressure.toFixed(1) + ' atm';
            document.getElementById('currentVolume').textContent = volume.toFixed(2) + ' L';
            document.getElementById('pvValue').textContent = (pressure * volume).toFixed(2);

            initParticles();
        }

        // ì´ˆê¸°í™”
        function resetSimulation() {
            cancelAnimationFrame(animationId);
            document.getElementById('pressureSlider').value = 1;
            document.getElementById('volumeSlider').value = 5;
            initialVolume = 5;
            initialPV = 5;
            pressure = 1;
            volume = 5;
            dataPoints = [];
            
            document.getElementById('dataTable').getElementsByTagName('tbody')[0].innerHTML = '';
            document.getElementById('feedbackText').textContent = 'ì‹¤í—˜ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•´ë³´ì„¸ìš”!';
            
            initParticles();
            drawSyringe();
            drawGraph();
        }

        // ë°ì´í„° í¬ì¸íŠ¸ ì¶”ê°€
        function addDataPoint() {
            const collisionFreq = (pressure * 100).toFixed(0);
            dataPoints.push({
                pressure: pressure,
                volume: volume,
                pv: pressure * volume,
                collision: collisionFreq
            });

            const tbody = document.getElementById('dataTable').getElementsByTagName('tbody')[0];
            const row = tbody.insertRow();
            row.innerHTML = `
                <td>${pressure.toFixed(2)}</td>
                <td>${volume.toFixed(2)}</td>
                <td>${(pressure * volume).toFixed(2)}</td>
                <td>${collisionFreq}</td>
            `;
            
            drawGraph();
        }

        // í”¼ë“œë°± ì—…ë°ì´íŠ¸
        function updateFeedback() {
            let feedback = '';
            
            if (pressure > 2) {
                feedback = 'ğŸ’¡ ì••ë ¥ì´ ë†’ì•„ì§€ë©´ ê¸°ì²´ ì…ìë“¤ì´ ë” ì¢ì€ ê³µê°„ì— ë°€ì§‘ë©ë‹ˆë‹¤. ì…ì ì‚¬ì´ì˜ ê±°ë¦¬ê°€ ê°€ê¹Œì›Œì§€ë©´ì„œ ë¶€í”¼ê°€ ê°ì†Œí•©ë‹ˆë‹¤!';
            } else if (pressure < 0.8) {
                feedback = 'ğŸ’¡ ì••ë ¥ì´ ë‚®ì•„ì§€ë©´ ê¸°ì²´ ì…ìë“¤ì´ ë” ë„“ì€ ê³µê°„ìœ¼ë¡œ í¼ì ¸ë‚˜ê°‘ë‹ˆë‹¤. ì…ì ì‚¬ì´ì˜ ê±°ë¦¬ê°€ ë©€ì–´ì§€ë©´ì„œ ë¶€í”¼ê°€ ì¦ê°€í•©ë‹ˆë‹¤!';
            } else {
                feedback = 'ğŸ’¡ ì••ë ¥ê³¼ ë¶€í”¼ì˜ ê³±(PÃ—V)ì´ ì¼ì •í•˜ê²Œ ìœ ì§€ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì„¸ìš”. ì´ê²ƒì´ ë°”ë¡œ ë³´ì¼ ë²•ì¹™ì…ë‹ˆë‹¤!';
            }

            if (Math.abs((pressure * volume) - initialPV) > 0.3) {
                feedback += ' âš ï¸ PV ê°’ì´ ë³€í–ˆë„¤ìš”! ì´ˆê¸° ë¶€í”¼ë¥¼ ë‹¤ì‹œ ì„¤ì •í•´ë³´ì„¸ìš”.';
            }

            document.getElementById('feedbackText').textContent = feedback;
        }

        // í€´ì¦ˆ ì •ë‹µ í™•ì¸
        function checkAnswers() {
            const answers = {q1: 'c', q2: 'c', q3: 'b'};
            let score = 0;
            let total = 3;

            for (let q in answers) {
                const selected = document.querySelector(`input[name="${q}"]:checked`);
                if (selected && selected.value === answers[q]) {
                    score++;
                }
            }

            const resultDiv = document.getElementById('quizResult');
            const percentage = (score / total * 100).toFixed(0);
            
            if (score === total) {
                resultDiv.innerHTML = `<div style="color: #27ae60; font-size: 1.2em;">ğŸ‰ ì™„ë²½í•©ë‹ˆë‹¤! ${score}/${total} ì •ë‹µ! ë³´ì¼ ë²•ì¹™ì„ ì™„ì „íˆ ì´í•´í–ˆì–´ìš”!</div>`;
            } else {
                resultDiv.innerHTML = `<div style="color: #e67e22; font-size: 1.1em;">ğŸ“ ${score}/${total} ì •ë‹µ (${percentage}%) - ë‹¤ì‹œ í•œ ë²ˆ ì‹¤í—˜ì„ ì§„í–‰í•˜ë©° ê°œë…ì„ í™•ì¸í•´ë³´ì„¸ìš”!</div>`;
            }
        }

        // ê²°ê³¼ ì €ì¥
        function exportReport() {
            let report = '=== ë³´ì¼ ë²•ì¹™ ì‹¤í—˜ ë³´ê³ ì„œ ===\n\n';
            report += `ì‹¤í—˜ ì¼ì‹œ: ${new Date().toLocaleString('ko-KR')}\n`;
            report += `í•™ìŠµ ì£¼ì œ: ì••ë ¥ì— ë”°ë¥¸ ê¸°ì²´ ë¶€í”¼ ë³€í™”\n\n`;
            report += '--- ì‹¤í—˜ ë°ì´í„° ---\n';
            report += 'ì••ë ¥(atm)\të¶€í”¼(L)\t\tPÃ—V\t\tì¶©ëŒë¹ˆë„\n';
            
            dataPoints.forEach(point => {
                report += `${point.pressure.toFixed(2)}\t\t${point.volume.toFixed(2)}\t\t${point.pv.toFixed(2)}\t\t${point.collision}\n`;
            });

            report += '\n--- ê²°ë¡  ---\n';
            report += 'ì¼ì •í•œ ì˜¨ë„ì—ì„œ ê¸°ì²´ì˜ ì••ë ¥ê³¼ ë¶€í”¼ì˜ ê³±ì€ ì¼ì •í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.\n';
            report += 'ì´ëŠ” ë³´ì¼ ë²•ì¹™(P Ã— V = ì¼ì •)ì„ ì‹¤í—˜ì ìœ¼ë¡œ í™•ì¸í•œ ê²°ê³¼ì…ë‹ˆë‹¤.\n';

            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ë³´ì¼ë²•ì¹™_ì‹¤í—˜ë³´ê³ ì„œ.txt';
            a.click();
            URL.revokeObjectURL(url);

            alert('ğŸ“„ ì‹¤í—˜ ë³´ê³ ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('pressureSlider').addEventListener('input', updateSimulation);
        document.getElementById('volumeSlider').addEventListener('input', function() {
            initialVolume = parseFloat(this.value);
            initialPV = pressure * initialVolume;
            document.getElementById('initialVolumeValue').textContent = initialVolume.toFixed(1) + ' L';
            updateSimulation();
        });

        // ì´ˆê¸° ì‹¤í–‰
        initParticles();
        drawSyringe();
        drawGraph();
    </script>
</body>
</html>
